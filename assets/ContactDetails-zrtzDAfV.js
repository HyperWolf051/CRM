import{a as e,j as s,S as a,B as t}from"./index-BFI46BYn.js";import{r as l}from"./react-vendor-DD48japz.js";import{C as n}from"./Card-BeAgZFFx.js";import{B as r}from"./Badge-A6KvQaV2.js";import{A as i}from"./Avatar-B2cb498D.js";import{M as c}from"./Modal-DddnzGjj.js";import{I as d}from"./Input-C2pGg6iS.js";import{u as o}from"./useContacts-oUj-_8Vv.js";import{a as m}from"./validation-Bmklxit8.js";import{c as x,a as h}from"./router-vendor-CA0F1SnT.js";import{C as j,K as u,N as p,O as g,m as v,y,Q as f,M as N,F as b}from"./icons-vendor-BTEav8Jc.js";import"./http-vendor-ei4kQ0Q2.js";const C=({contact:e,onSubmit:a,onCancel:n,loading:r})=>{const[i,c]=l.useState({name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||"",phone:(null==e?void 0:e.phone)||"",company:(null==e?void 0:e.company)||"",address:(null==e?void 0:e.address)||"",notes:(null==e?void 0:e.notes)||"",status:(null==e?void 0:e.status)||"lead"}),[o,x]=l.useState({}),h=e=>s=>{c(a=>({...a,[e]:s.target.value})),o[e]&&x(s=>({...s,[e]:""}))};return s.jsxs("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return i.name.trim()||(e.name="Name is required"),i.email.trim()?m(i.email)||(e.email="Please enter a valid email address"):e.email="Email is required",x(e),0===Object.keys(e).length})()&&a(i)},className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(d,{label:"Name *",value:i.name,onChange:h("name"),error:o.name,placeholder:"Enter full name"}),s.jsx(d,{label:"Email *",type:"email",value:i.email,onChange:h("email"),error:o.email,placeholder:"Enter email address"}),s.jsx(d,{label:"Phone",type:"tel",value:i.phone,onChange:h("phone"),error:o.phone,placeholder:"Enter phone number"}),s.jsx(d,{label:"Company",value:i.company,onChange:h("company"),error:o.company,placeholder:"Enter company name"})]}),s.jsx(d,{label:"Address",value:i.address,onChange:h("address"),error:o.address,placeholder:"Enter address"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Status"}),s.jsxs("select",{value:i.status,onChange:h("status"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"lead",children:"Lead"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Notes"}),s.jsx("textarea",{value:i.notes,onChange:h("notes"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Add any notes about this contact..."})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(t,{type:"button",variant:"secondary",onClick:n,disabled:r,children:"Cancel"}),s.jsx(t,{type:"submit",loading:r,children:"Update Contact"})]})]})},w=()=>{const{id:d}=x(),m=h(),{showToast:w}=e(),{getContact:k,updateContact:S,deleteContact:z}=o(),[A,E]=l.useState(null),[I,B]=l.useState(!0),[D,F]=l.useState(null),[M,O]=l.useState(!1),[P,T]=l.useState(!1),[q,K]=l.useState(!1);l.useEffect(()=>{(async()=>{if(d){B(!0),F(null);try{const e=await k(d);e.success?E(e.data):F(e.error)}catch(e){F("Failed to load contact details")}finally{B(!1)}}})()},[d,k]);const L=()=>{m("/app/contacts")},Q=()=>{O(!1)},U=()=>{T(!1)};return I?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(a,{width:40,height:40,className:"rounded"}),s.jsxs("div",{children:[s.jsx(a,{width:200,height:32,className:"mb-2"}),s.jsx(a,{width:150,height:20})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(a,{width:80,height:40,className:"rounded"}),s.jsx(a,{width:80,height:40,className:"rounded"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs(n,{className:"p-6",children:[s.jsx(a,{width:150,height:24,className:"mb-4"}),s.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((e,t)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(a,{width:20,height:20}),s.jsx(a,{width:200,height:20})]},t))})]})}),s.jsx("div",{children:s.jsxs(n,{className:"p-6",children:[s.jsx(a,{width:100,height:24,className:"mb-4"}),s.jsx(a,{width:"100%",height:100})]})})]})]}):D?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(j,{className:"text-red-500 mb-4",size:48}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load contact"}),s.jsx("p",{className:"text-gray-500 mb-4",children:D}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(t,{variant:"secondary",onClick:L,children:"Back to Contacts"}),s.jsx(t,{onClick:()=>window.location.reload(),children:"Try Again"})]})]}):A?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(t,{variant:"ghost",onClick:L,icon:s.jsx(u,{size:20}),className:"p-2"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(i,{src:A.avatar,name:A.name,size:"lg"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:A.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(r,{variant:(e=>{switch(e){case"active":return"success";case"inactive":default:return"neutral";case"lead":return"info"}})(A.status),children:(e=>{switch(e){case"active":return"Active";case"inactive":return"Inactive";case"lead":return"Lead";default:return"Unknown"}})(A.status)}),s.jsxs("span",{className:"text-sm text-gray-500",children:["ID: ",A.id]})]})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(t,{variant:"secondary",onClick:()=>{O(!0)},icon:s.jsx(p,{size:16}),children:"Edit"}),s.jsx(t,{variant:"danger",onClick:()=>{T(!0)},icon:s.jsx(g,{size:16}),children:"Delete"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs(n,{className:"p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(v,{className:"text-gray-400",size:20}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Email"}),s.jsx("div",{className:"text-sm text-gray-600",children:s.jsx("a",{href:`mailto:${A.email}`,className:"hover:text-primary-600 transition-colors",children:A.email})})]})]}),A.phone&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(y,{className:"text-gray-400",size:20}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Phone"}),s.jsx("div",{className:"text-sm text-gray-600",children:s.jsx("a",{href:`tel:${A.phone}`,className:"hover:text-primary-600 transition-colors",children:A.phone})})]})]}),A.company&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(f,{className:"text-gray-400",size:20}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Company"}),s.jsx("div",{className:"text-sm text-gray-600",children:A.company})]})]}),A.address&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(N,{className:"text-gray-400",size:20}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Address"}),s.jsx("div",{className:"text-sm text-gray-600",children:A.address})]})]})]})]})}),s.jsx("div",{children:s.jsxs(n,{className:"p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[s.jsx(b,{size:20}),"Notes"]}),A.notes?s.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:A.notes}):s.jsx("div",{className:"text-sm text-gray-400 italic",children:"No notes added yet"})]})})]}),s.jsx(c,{isOpen:M,onClose:Q,title:"Edit Contact",className:"max-w-2xl",children:s.jsx(C,{contact:A,onSubmit:async e=>{K(!0);try{const s=await S(A.id,e);s.success?(E(s.data),w("success","Contact updated successfully"),O(!1)):w("error",s.error)}catch(s){w("error","An unexpected error occurred")}finally{K(!1)}},onCancel:Q,loading:q})}),s.jsx(c,{isOpen:P,onClose:U,title:"Delete Contact",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to delete ",s.jsx("strong",{children:A.name}),"? This action cannot be undone and will remove all associated data."]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(t,{variant:"secondary",onClick:U,children:"Cancel"}),s.jsx(t,{variant:"danger",onClick:async()=>{try{const e=await z(A.id);e.success?(w("success","Contact deleted successfully"),m("/app/contacts")):w("error",e.error)}catch(e){w("error","Failed to delete contact")}},children:"Delete Contact"})]})]})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(j,{className:"text-gray-400 mb-4",size:48}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Contact not found"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"The contact you're looking for doesn't exist or has been deleted."}),s.jsx(t,{onClick:L,children:"Back to Contacts"})]})};export{w as default};
