import{j as e,C as s}from"./index-CovdTvDO.js";import{r as a}from"./react-vendor-DD48japz.js";import{d as r,u as l,a as t}from"./useDuplicateDetection-CyNTkaf_.js";import{c as i}from"./candidateUtils-CAE7rsIc.js";import{t as n,X as d,j as c,n as o,E as x,c as m,U as u,aD as h,a as g,C as b,F as p,aj as j,O as f,ac as v}from"./icons-vendor-Cvv-27T5.js";import{a as y}from"./router-vendor-CA0F1SnT.js";import"./http-vendor-ei4kQ0Q2.js";const N=({isOpen:s,onClose:l,newCandidate:t,duplicates:i=[],onMerge:b,onCreateNew:p,onLinkRelated:j,isLoading:f=!1})=>{const[v,y]=a.useState(""),[N,w]=a.useState(null),[C,k]=a.useState({});if(a.useEffect(()=>{s&&(y(""),w(null),k({}))},[s]),!s)return null;const S=(e,s=null)=>{y(e),w(s)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-red-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(n,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Potential Duplicates Found"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["We found ",i.length," potential duplicate",1!==i.length?"s":""," for this candidate"]})]})]}),e.jsx("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(d,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"lg:w-1/3 p-6 border-r border-gray-200 bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"New Candidate"}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(c,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.position||t.interestedFor})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[t.email&&e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(o,{className:"w-4 h-4"}),e.jsx("span",{children:t.email})]}),t.phone&&e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{children:t.phone})]}),t.location&&e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:t.location})]})]})]})]}),e.jsxs("div",{className:"lg:w-2/3 p-6 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Potential Matches"}),e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(c,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.candidate.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Added by ",s.createdByName," • ",r.formatTimeAgo(new Date(s.createdAt))]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${r.getConfidenceColor(s.confidence)}`,children:[s.confidence.toUpperCase()," (",r.formatMatchScore(s.matchScore),")"]}),e.jsx("button",{onClick:()=>{return e=s.candidateId,void k(s=>({...s,[e]:!s[e]}));var e},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:C[s.candidateId]?"Hide Details":"Show Details"})]})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:s.matchReasons.map((s,a)=>e.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-md border border-blue-200",children:[s.field,": ",s.similarity,"%"]},a))})]}),C[s.candidateId]&&e.jsxs("div",{className:"border-t border-gray-200 bg-gray-50 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Contact Information"}),e.jsxs("div",{className:"space-y-1 text-gray-600",children:[e.jsxs("div",{children:["Email: ",s.candidate.email]}),e.jsxs("div",{children:["Phone: ",s.candidate.phone]}),e.jsxs("div",{children:["Location: ",s.candidate.location]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Professional Details"}),e.jsxs("div",{className:"space-y-1 text-gray-600",children:[e.jsxs("div",{children:["Position: ",s.candidate.interestedFor]}),e.jsxs("div",{children:["Experience: ",s.candidate.totalExperience]}),e.jsxs("div",{children:["Current Stage: ",s.candidate.currentStage]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Match Details"}),e.jsx("div",{className:"space-y-2",children:s.matchReasons.map((s,a)=>e.jsx("div",{className:"text-xs text-gray-600 bg-white p-2 rounded border",children:s.details},a))})]})]}),e.jsx("div",{className:"border-t border-gray-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>S("merge",s),className:"flex items-center space-x-2 px-3 py-2 text-white text-sm font-medium rounded-lg transition-colors "+("merge"===v&&(null==N?void 0:N.candidateId)===s.candidateId?"bg-blue-700":"bg-blue-600 hover:bg-blue-700"),children:[e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{children:"Merge Candidates"})]}),e.jsxs("button",{onClick:()=>S("link-related",s),className:"flex items-center space-x-2 px-3 py-2 text-amber-700 bg-amber-50 border border-amber-200 text-sm font-medium rounded-lg hover:bg-amber-100 transition-colors "+("link-related"===v&&(null==N?void 0:N.candidateId)===s.candidateId?"bg-amber-100":""),children:[e.jsx(h,{className:"w-4 h-4"}),e.jsx("span",{children:"Link as Related"})]})]})})]},s.candidateId))})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"text-sm text-gray-600",children:v&&e.jsxs("span",{children:["Selected action: ",e.jsxs("strong",{children:["merge"===v&&"Merge with existing candidate","create-new"===v&&"Create as new candidate","link-related"===v&&"Link as related candidate"]})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>S("create-new"),className:"flex items-center space-x-2 px-4 py-2 text-green-700 bg-green-50 border border-green-200 font-medium rounded-lg hover:bg-green-100 transition-colors "+("create-new"===v?"bg-green-100":""),children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:"Create New Anyway"})]}),e.jsx("button",{onClick:l,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium rounded-lg border border-gray-300 hover:border-gray-400 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{switch(v){case"merge":N&&b(N.candidateId,N.candidate);break;case"create-new":p();break;case"link-related":N&&j([N.candidateId])}},disabled:!v||f,className:`flex items-center space-x-2 px-4 py-2 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${v?(e=>{switch(e){case"merge":return"bg-blue-600 hover:bg-blue-700";case"create-new":return"bg-green-600 hover:bg-green-700";case"link-related":return"bg-amber-600 hover:bg-amber-700";default:return"bg-gray-600 hover:bg-gray-700"}})(v):"bg-gray-400"}`,children:[(s=>{switch(s){case"merge":return e.jsx(u,{className:"w-4 h-4"});case"create-new":return e.jsx(g,{className:"w-4 h-4"});case"link-related":return e.jsx(h,{className:"w-4 h-4"});default:return null}})(v),e.jsx("span",{children:f?"Processing...":"Confirm Action"})]})]})]})]})})},w=({isOpen:s,onClose:r,mergePreview:l,onConfirmMerge:t,isLoading:i=!1})=>{var n,o,x;const[u,f]=a.useState({}),[v,y]=a.useState({});if(a.useEffect(()=>{if(s&&l){const e={};l.conflicts.forEach(s=>{e[s.field]={selectedValue:s.suggestedValue,source:s.primaryValue===s.suggestedValue?"primary":"duplicate"}}),f(e);const s={};l.preservedData.forEach((e,a)=>{s[a]=e.preserveInMerged}),y(s)}},[s,l]),!s||!l)return null;const N=(e,s,a)=>{f(r=>({...r,[e]:{selectedValue:s,source:a}}))},w=e=>{switch(e){case"different-values":return"border-red-200 bg-red-50";case"missing-data":return"border-amber-200 bg-amber-50";case"format-mismatch":return"border-blue-200 bg-blue-50";default:return"border-gray-200 bg-gray-50"}},C=s=>{switch(s){case"note":case"document":default:return e.jsx(p,{className:"w-4 h-4"});case"change-history":return e.jsx(j,{className:"w-4 h-4"});case"interview":return e.jsx(m,{className:"w-4 h-4"})}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-blue-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(h,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Merge Preview"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review and resolve conflicts before merging candidates"})]})]}),e.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(d,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-200px)]",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(g,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-green-900",children:"Primary Candidate"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",l.primaryCandidate.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",l.primaryCandidate.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",l.primaryCandidate.phone]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Added by:"})," ",l.primaryCandidate.createdByName]})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(b,{className:"w-5 h-5 text-red-600"}),e.jsx("h3",{className:"font-semibold text-red-900",children:"Duplicate Candidate"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",l.duplicateCandidate.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",l.duplicateCandidate.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",l.duplicateCandidate.phone]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Added by:"})," ",l.duplicateCandidate.createdByName]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(c,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-blue-900",children:"Merged Result"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",(null==(n=u.name)?void 0:n.selectedValue)||l.mergedCandidate.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",(null==(o=u.email)?void 0:o.selectedValue)||l.mergedCandidate.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",(null==(x=u.phone)?void 0:x.selectedValue)||l.mergedCandidate.phone]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Will preserve:"})," ",l.preservedData.length," data items"]})]})]})]}),l.conflicts.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resolve Conflicts"}),e.jsx("div",{className:"space-y-4",children:l.conflicts.map((s,a)=>{var r,l,t,i,n,d,o;return e.jsxs("div",{className:`border rounded-lg p-4 ${w(s.conflictType)}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[(o=s.field,"name"===o?e.jsx(c,{className:"w-4 h-4"}):e.jsx(p,{className:"w-4 h-4"})),e.jsx("h4",{className:"font-medium text-gray-900",children:s.fieldDisplayName}),e.jsx("span",{className:"text-xs px-2 py-1 bg-white rounded-full border",children:s.conflictType.replace("-"," ")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-white transition-colors",children:[e.jsx("input",{type:"radio",name:`conflict-${s.field}`,checked:"primary"===(null==(r=u[s.field])?void 0:r.source),onChange:()=>N(s.field,s.primaryValue,"primary"),className:"text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Primary Value"}),e.jsx("div",{className:"text-sm text-gray-600 break-all",children:s.primaryValue||e.jsx("em",{className:"text-gray-400",children:"Empty"})})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg cursor-pointer hover:bg-white transition-colors",children:[e.jsx("input",{type:"radio",name:`conflict-${s.field}`,checked:"duplicate"===(null==(l=u[s.field])?void 0:l.source),onChange:()=>N(s.field,s.duplicateValue,"duplicate"),className:"text-red-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Duplicate Value"}),e.jsx("div",{className:"text-sm text-gray-600 break-all",children:s.duplicateValue||e.jsx("em",{className:"text-gray-400",children:"Empty"})})]})]})}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[e.jsx("input",{type:"radio",name:`conflict-${s.field}`,checked:"custom"===(null==(t=u[s.field])?void 0:t.source),onChange:()=>N(s.field,"","custom"),className:"text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Custom Value"}),e.jsx("input",{type:"text",value:"custom"===(null==(i=u[s.field])?void 0:i.source)?null==(n=u[s.field])?void 0:n.selectedValue:"",onChange:e=>N(s.field,e.target.value,"custom"),className:"w-full text-sm text-gray-600 bg-transparent border-none outline-none",placeholder:"Enter custom value...",disabled:"custom"!==(null==(d=u[s.field])?void 0:d.source)})]})]})})]})]},s.field)})})]}),l.preservedData.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data to Preserve"}),e.jsx("div",{className:"space-y-3",children:l.preservedData.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[C(s.type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 capitalize",children:s.type.replace("-"," ")}),e.jsx("div",{className:"text-sm text-gray-600",children:s.description})]})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:void 0!==v[a]?v[a]:s.preserveInMerged,onChange:e=>((e,s)=>{y(a=>({...a,[e]:s}))})(a,e.target.checked),className:"text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Preserve"})]})]},a))})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(b,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-amber-900",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-amber-800 mt-1",children:"This action cannot be undone. The duplicate candidate will be permanently merged into the primary candidate. All selected data will be preserved and a complete audit trail will be maintained."})]})]})})]})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"text-sm text-gray-600",children:l.conflicts.length>0&&e.jsxs("span",{children:[l.conflicts.filter(e=>e.requiresDecision).length," conflicts require your decision"]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium rounded-lg border border-gray-300 hover:border-gray-400 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{const e=Object.entries(u).map(([e,s])=>({field:e,selectedValue:s.selectedValue,source:s.source})),s=l.preservedData.map((e,s)=>({...e,preserveInMerged:void 0!==v[s]?v[s]:e.preserveInMerged}));t(e,s)},disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(h,{className:"w-4 h-4"}),e.jsx("span",{children:i?"Merging...":"Confirm Merge"})]})]})]})]})})},C=()=>{const r=y(),[n,c]=a.useState(!1),[o,x]=a.useState({name:"",email:"",phone:"",position:"",experience:"",location:"",address:"",dateOfBirth:"",nationality:"",education:"",linkedIn:"",portfolio:"",salary:"",skills:"",notes:"",allocation:"",currentStage:"registration",overallStatus:"new"}),{isLoading:m,duplicateResult:u,checkDuplicates:h,mergeCandidates:g,clearDuplicateResult:b}=l(),[p,j]=a.useState(!1),[C,k]=a.useState(!1),[S,P]=a.useState(null),[D,I]=a.useState(null),A=async e=>{try{const a={id:"current-user",name:"Current User"},l=i.createNewCandidate(e,a.id,a.name),t=await s.create(l);t.success?(alert("Candidate added successfully!"),r("/app/recruiter/candidates")):alert("Failed to add candidate: "+t.message)}catch(a){alert("Failed to add candidate. Please try again.")}finally{c(!1)}},E=async()=>{j(!1);const e={...o,interestedFor:o.position,skills:o.skills?o.skills.split(",").map(e=>e.trim()):[]};await A(e)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>r("/app/recruiter/candidates"),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(f,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Candidate"}),e.jsx("p",{className:"text-gray-600",children:"Add a new candidate to your recruitment pipeline"})]})]})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o.name&&o.email)try{c(!0);const e={...o,interestedFor:o.position,skills:o.skills?o.skills.split(",").map(e=>e.trim()):[]},s=await h(e);if(s.hasMatches&&s.matches.length>0)return j(!0),void c(!1);await A(e)}catch(s){alert("Failed to add candidate. Please try again."),c(!1)}else alert("Please fill in the required fields (Name and Email)")},className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:o.name,onChange:e=>x({...o,name:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter full name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:o.email,onChange:e=>x({...o,email:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"candidate@email.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:o.phone,onChange:e=>x({...o,phone:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+91 98765 43210"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",value:o.dateOfBirth,onChange:e=>x({...o,dateOfBirth:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx("input",{type:"text",value:o.location,onChange:e=>x({...o,location:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"City, State"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nationality"}),e.jsx("input",{type:"text",value:o.nationality,onChange:e=>x({...o,nationality:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nationality"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("input",{type:"text",value:o.address,onChange:e=>x({...o,address:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Full address"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position *"}),e.jsx("input",{type:"text",value:o.position,onChange:e=>x({...o,position:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Job title or position",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience"}),e.jsx("input",{type:"text",value:o.experience,onChange:e=>x({...o,experience:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 5 years"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Salary"}),e.jsx("input",{type:"text",value:o.salary,onChange:e=>x({...o,salary:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"₹18,00,000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Education"}),e.jsx("input",{type:"text",value:o.education,onChange:e=>x({...o,education:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Degree - University"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn Profile"}),e.jsx("input",{type:"url",value:o.linkedIn,onChange:e=>x({...o,linkedIn:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://linkedin.com/in/username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Portfolio/Website"}),e.jsx("input",{type:"url",value:o.portfolio,onChange:e=>x({...o,portfolio:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://portfolio.com"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),e.jsx("input",{type:"text",value:o.skills,onChange:e=>x({...o,skills:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"React, TypeScript, Node.js, AWS (comma separated)"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recruitment Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allocation"}),e.jsxs("select",{value:o.allocation,onChange:e=>x({...o,allocation:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select allocation..."}),e.jsx("option",{value:"Sheet-1",children:"Sheet-1"}),e.jsx("option",{value:"Sheet-2",children:"Sheet-2"}),e.jsx("option",{value:"Sheet-3",children:"Sheet-3"}),e.jsx("option",{value:"Sheet-4",children:"Sheet-4"}),e.jsx("option",{value:"Sheet-5",children:"Sheet-5"}),e.jsx("option",{value:"Sheet-6",children:"Sheet-6"}),e.jsx("option",{value:"Team Alpha",children:"Team Alpha"}),e.jsx("option",{value:"Team Beta",children:"Team Beta"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),e.jsxs("select",{value:o.currentStage,onChange:e=>x({...o,currentStage:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"registration",children:"Registration"}),e.jsx("option",{value:"resume-sharing",children:"Resume Sharing"}),e.jsx("option",{value:"shortlisting",children:"Shortlisting"}),e.jsx("option",{value:"lineup-feedback",children:"Lineup & Feedback"}),e.jsx("option",{value:"selection",children:"Selection"}),e.jsx("option",{value:"closure",children:"Closure"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:o.notes,onChange:e=>x({...o,notes:e.target.value}),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Additional notes about the candidate..."})]})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl",children:[e.jsxs("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to cancel? All unsaved changes will be lost.")&&r("/app/recruiter/candidates")},className:"flex items-center space-x-2 px-6 py-3 text-gray-600 hover:text-gray-800 font-medium rounded-lg border border-gray-300 hover:border-gray-400 transition-colors",children:[e.jsx(d,{className:"w-4 h-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:n?"Adding...":"Add Candidate"})]})]})]}),e.jsx(N,{isOpen:p,onClose:()=>{j(!1),b()},newCandidate:{...o,interestedFor:o.position},duplicates:(null==u?void 0:u.matches)||[],onMerge:(e,s)=>{P(s);const a={...o,interestedFor:o.position,skills:o.skills?o.skills.split(",").map(e=>e.trim()):[]},r="current-user",l="Current User",n=i.createNewCandidate(a,r,l),d=t.generateMergePreview(s,n);I(d),j(!1),k(!0)},onCreateNew:E,onLinkRelated:async e=>{await E()},isLoading:m||n}),e.jsx(w,{isOpen:C,onClose:()=>{k(!1),I(null),P(null)},mergePreview:D,onConfirmMerge:async(e,s)=>{try{c(!0);const s=await g(D.primaryCandidate,D.duplicateCandidate,e);s.success?(alert("Candidates merged successfully!"),r("/app/recruiter/candidates")):alert("Failed to merge candidates: "+s.error)}catch(a){alert("Failed to merge candidates. Please try again.")}finally{c(!1),k(!1)}},isLoading:n})]})};export{C as default};
