import{j as e}from"./index-Bzv9HkLu.js";import{r as s}from"./react-vendor-DD48japz.js";import{n as t,X as a,aw as r,av as n,r as l,a0 as i,W as c,aI as o,a1 as d,ac as m,M as x,g as u,aJ as h,aK as p,ax as g,j as b,l as j,p as y,aL as f,c as v,b as N,S as w,y as k,F as C,J as S,Q as T,E as D,aM as E,d as I,aN as M,aO as q,at as A,aP as P,aQ as U,ae as O,C as $,a as F,V as R,U as L,ag as z,au as J,a5 as V,v as W,t as _,k as B}from"./icons-vendor-Cvv-27T5.js";import"./router-vendor-CA0F1SnT.js";import"./http-vendor-ei4kQ0Q2.js";const Y=new class{constructor(){this.baseUrl="/api/communication"}async getEmailSequences(){try{const e=await fetch(`${this.baseUrl}/email-sequences`);if(!e.ok)throw new Error("Failed to fetch email sequences");return await e.json()}catch(e){return this.getMockEmailSequences()}}async createEmailSequence(e){try{const s=await fetch(`${this.baseUrl}/email-sequences`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Failed to create email sequence");return await s.json()}catch(s){return{id:Date.now().toString(),...e}}}async updateEmailSequence(e,s){try{const t=await fetch(`${this.baseUrl}/email-sequences/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error("Failed to update email sequence");return await t.json()}catch(t){return{id:e,...s}}}async deleteEmailSequence(e){try{if(!(await fetch(`${this.baseUrl}/email-sequences/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete email sequence");return!0}catch(s){return!1}}async getComments(e,s){try{const t=await fetch(`${this.baseUrl}/comments?entityType=${e}&entityId=${s}`);if(!t.ok)throw new Error("Failed to fetch comments");return await t.json()}catch(t){return this.getMockComments(e,s)}}async addComment(e){try{const s=await fetch(`${this.baseUrl}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Failed to add comment");return await s.json()}catch(s){return{id:Date.now().toString(),...e,createdAt:new Date}}}async getTasks(e){try{const s=await fetch(`${this.baseUrl}/tasks?assignedTo=${e}`);if(!s.ok)throw new Error("Failed to fetch tasks");return await s.json()}catch(s){return this.getMockTasks(e)}}async createTask(e){try{const s=await fetch(`${this.baseUrl}/tasks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Failed to create task");return await s.json()}catch(s){return{id:Date.now().toString(),...e,createdAt:new Date}}}async updateTask(e,s){try{const t=await fetch(`${this.baseUrl}/tasks/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error("Failed to update task");return await t.json()}catch(t){return{id:e,...s}}}async getClientInteractions(e){try{const s=await fetch(`${this.baseUrl}/client-interactions?clientId=${e}`);if(!s.ok)throw new Error("Failed to fetch client interactions");return await s.json()}catch(s){return this.getMockClientInteractions(e)}}async addClientInteraction(e){try{const s=await fetch(`${this.baseUrl}/client-interactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Failed to add client interaction");return await s.json()}catch(s){return{id:Date.now().toString(),...e,createdAt:new Date}}}async getClientPreferences(e){try{const s=await fetch(`${this.baseUrl}/client-preferences/${e}`);if(!s.ok)throw new Error("Failed to fetch client preferences");return await s.json()}catch(s){return this.getMockClientPreferences(e)}}async updateClientPreferences(e,s){try{const t=await fetch(`${this.baseUrl}/client-preferences/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error("Failed to update client preferences");return await t.json()}catch(t){return{clientId:e,...s}}}async getSocialMediaIntegrations(){try{const e=await fetch(`${this.baseUrl}/social-media/integrations`);if(!e.ok)throw new Error("Failed to fetch social media integrations");return await e.json()}catch(e){return this.getMockSocialMediaIntegrations()}}async connectSocialMedia(e,s){try{const t=await fetch(`${this.baseUrl}/social-media/connect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({platform:e,authCode:s})});if(!t.ok)throw new Error("Failed to connect social media");return await t.json()}catch(t){return{platform:e,isConnected:!0,connectedAt:new Date}}}async postToSocialMedia(e){try{const s=await fetch(`${this.baseUrl}/social-media/post`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Failed to post to social media");return await s.json()}catch(s){return{id:Date.now().toString(),...e,status:"published"}}}async getVideoConferenceIntegrations(){try{const e=await fetch(`${this.baseUrl}/video-conference/integrations`);if(!e.ok)throw new Error("Failed to fetch video conference integrations");return await e.json()}catch(e){return this.getMockVideoConferenceIntegrations()}}async connectVideoConference(e,s){try{const t=await fetch(`${this.baseUrl}/video-conference/connect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e,credentials:s})});if(!t.ok)throw new Error("Failed to connect video conference");return await t.json()}catch(t){return{provider:e,isConnected:!0,connectedAt:new Date}}}async createMeeting(e){try{const s=await fetch(`${this.baseUrl}/video-conference/meetings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("Failed to create meeting");return await s.json()}catch(s){return{id:Date.now().toString(),...e,joinUrl:`https://zoom.us/j/${Math.random().toString().substr(2,10)}`,meetingId:Math.random().toString().substr(2,10)}}}async getCommunicationPreferences(e){try{const s=await fetch(`${this.baseUrl}/preferences/${e}`);if(!s.ok)throw new Error("Failed to fetch communication preferences");return await s.json()}catch(s){return this.getMockCommunicationPreferences(e)}}async updateCommunicationPreferences(e,s){try{const t=await fetch(`${this.baseUrl}/preferences/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error("Failed to update communication preferences");return await t.json()}catch(t){return{candidateId:e,...s}}}getMockEmailSequences(){return[{id:"1",name:"New Candidate Welcome",description:"Welcome sequence for newly registered candidates",isActive:!0,trigger:{type:"candidate-added",conditions:{}},emails:[{id:"1",subject:"Welcome to our recruitment process!",content:"Hi {{candidateName}}, welcome to our recruitment process...",variables:[{name:"candidateName",description:"Candidate name",required:!0}],delay:0}],createdBy:"user1",createdAt:new Date("2024-01-01"),lastModified:new Date("2024-01-15"),stats:{sent:150,opened:120,clicked:45,replied:12}}]}getMockComments(e,s){return[{id:"1",candidateId:"candidate"===e?s:void 0,jobId:"job"===e?s:void 0,content:"Great candidate, moving to next round",author:{id:"user1",name:"John Doe",avatar:"/avatars/john.jpg"},mentions:[],attachments:[],createdAt:new Date("2024-01-15T10:30:00"),replies:[]}]}getMockTasks(e){return[{id:"1",title:"Follow up with candidate",description:"Call candidate to discuss next steps",assignedTo:e,assignedBy:"manager1",candidateId:"candidate1",priority:"high",status:"pending",dueDate:new Date("2024-01-20"),createdAt:new Date("2024-01-15")}]}getMockClientInteractions(e){return[{id:"1",clientId:e,type:"email",subject:"Candidate shortlist for Software Engineer position",content:"Please find attached the shortlisted candidates...",participants:["client@company.com"],completedAt:new Date("2024-01-15T14:30:00"),outcome:"Client requested 3 more candidates",followUpRequired:!0,followUpDate:new Date("2024-01-18"),attachments:[],createdBy:"user1",createdAt:new Date("2024-01-15T14:30:00")}]}getMockClientPreferences(e){return{clientId:e,communicationMethod:"email",preferredTime:{start:"09:00",end:"17:00",timezone:"UTC"},frequency:"weekly",topics:["candidate-updates","market-insights"],optOut:!1}}getMockSocialMediaIntegrations(){return[{platform:"linkedin",isConnected:!0,permissions:["read","write"]},{platform:"twitter",isConnected:!1,permissions:[]},{platform:"facebook",isConnected:!1,permissions:[]}]}getMockVideoConferenceIntegrations(){return[{provider:"zoom",isConnected:!0,defaultSettings:{duration:60,waitingRoom:!0,recording:!1,password:!0}},{provider:"teams",isConnected:!1,defaultSettings:{duration:60,waitingRoom:!1,recording:!1,password:!1}},{provider:"meet",isConnected:!1,defaultSettings:{duration:60,waitingRoom:!1,recording:!1,password:!1}}]}getMockCommunicationPreferences(e){return{candidateId:e,email:{enabled:!0,frequency:"weekly",types:["job-updates","interview-reminders"]},sms:{enabled:!1,types:[]},phone:{enabled:!0,preferredTime:{start:"10:00",end:"18:00",timezone:"UTC"}},optOut:{all:!1,marketing:!1,transactional:!1}}}},H=()=>{const[e,t]=s.useState([]),[a,r]=s.useState([]),[n,l]=s.useState([]),[i,c]=s.useState([]),[o,d]=s.useState([]),[m,x]=s.useState([]),[u,h]=s.useState(!1),[p,g]=s.useState(null);return{emailSequences:e,comments:a,tasks:n,clientInteractions:i,socialMediaIntegrations:o,videoConferenceIntegrations:m,loading:u,error:p,fetchEmailSequences:s.useCallback(async()=>{try{h(!0);const e=await Y.getEmailSequences();t(e)}catch(e){g(e.message)}finally{h(!1)}},[]),createEmailSequence:s.useCallback(async e=>{try{h(!0);const s=await Y.createEmailSequence(e);return t(e=>[...e,s]),s}catch(s){throw g(s.message),s}finally{h(!1)}},[]),updateEmailSequence:s.useCallback(async(e,s)=>{try{h(!0);const a=await Y.updateEmailSequence(e,s);return t(s=>s.map(s=>s.id===e?a:s)),a}catch(a){throw g(a.message),a}finally{h(!1)}},[]),deleteEmailSequence:s.useCallback(async e=>{try{h(!0),await Y.deleteEmailSequence(e),t(s=>s.filter(s=>s.id!==e))}catch(s){throw g(s.message),s}finally{h(!1)}},[]),fetchComments:s.useCallback(async(e,s)=>{try{h(!0);const t=await Y.getComments(e,s);r(t)}catch(t){g(t.message)}finally{h(!1)}},[]),addComment:s.useCallback(async e=>{try{const s=await Y.addComment(e);return r(e=>[...e,s]),s}catch(s){throw g(s.message),s}},[]),fetchTasks:s.useCallback(async e=>{try{h(!0);const s=await Y.getTasks(e);l(s)}catch(s){g(s.message)}finally{h(!1)}},[]),createTask:s.useCallback(async e=>{try{const s=await Y.createTask(e);return l(e=>[...e,s]),s}catch(s){throw g(s.message),s}},[]),updateTask:s.useCallback(async(e,s)=>{try{const t=await Y.updateTask(e,s);return l(s=>s.map(s=>s.id===e?t:s)),t}catch(t){throw g(t.message),t}},[]),fetchClientInteractions:s.useCallback(async e=>{try{h(!0);const s=await Y.getClientInteractions(e);c(s)}catch(s){g(s.message)}finally{h(!1)}},[]),addClientInteraction:s.useCallback(async e=>{try{const s=await Y.addClientInteraction(e);return c(e=>[...e,s]),s}catch(s){throw g(s.message),s}},[]),fetchSocialMediaIntegrations:s.useCallback(async()=>{try{h(!0);const e=await Y.getSocialMediaIntegrations();d(e)}catch(e){g(e.message)}finally{h(!1)}},[]),connectSocialMedia:s.useCallback(async(e,s)=>{try{h(!0);const t=await Y.connectSocialMedia(e,s);return d(s=>s.map(s=>s.platform===e?{...s,isConnected:!0}:s)),t}catch(t){throw g(t.message),t}finally{h(!1)}},[]),postToSocialMedia:s.useCallback(async e=>{try{h(!0);return await Y.postToSocialMedia(e)}catch(s){throw g(s.message),s}finally{h(!1)}},[]),fetchVideoConferenceIntegrations:s.useCallback(async()=>{try{h(!0);const e=await Y.getVideoConferenceIntegrations();x(e)}catch(e){g(e.message)}finally{h(!1)}},[]),connectVideoConference:s.useCallback(async(e,s)=>{try{h(!0);const t=await Y.connectVideoConference(e,s);return x(s=>s.map(s=>s.provider===e?{...s,isConnected:!0}:s)),t}catch(t){throw g(t.message),t}finally{h(!1)}},[]),createMeeting:s.useCallback(async e=>{try{h(!0);return await Y.createMeeting(e)}catch(s){throw g(s.message),s}finally{h(!1)}},[]),getCommunicationPreferences:s.useCallback(async e=>{try{return await Y.getCommunicationPreferences(e)}catch(s){throw g(s.message),s}},[]),updateCommunicationPreferences:s.useCallback(async(e,s)=>{try{return await Y.updateCommunicationPreferences(e,s)}catch(t){throw g(t.message),t}},[]),clearError:()=>g(null)}},G=({isOpen:x,onClose:u,sequence:h=null})=>{const{createEmailSequence:p,updateEmailSequence:g,loading:b}=H(),[j,y]=s.useState({name:"",description:"",isActive:!0,trigger:{type:"candidate-added",conditions:{},delay:0},emails:[]}),[f,v]=s.useState(new Set),[N,w]=s.useState(null);s.useEffect(()=>{h?(y(h),v(new Set(h.emails.map((e,s)=>s)))):(y({name:"",description:"",isActive:!0,trigger:{type:"candidate-added",conditions:{},delay:0},emails:[]}),v(new Set))},[h]);const k=(e,s,t)=>{y(a=>({...a,emails:a.emails.map((a,r)=>r===e?{...a,[s]:t}:a)}))},C=(e,s,t,a)=>{const r=j.emails[e].variables.map((e,r)=>r===s?{...e,[t]:a}:e);k(e,"variables",r)};return x?e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(t,{className:"h-6 w-6 text-blue-600"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:h?"Edit Email Sequence":"Create Email Sequence"})]}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(a,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{h?await g(h.id,j):await p(j),u()}catch(s){}},className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sequence Name"}),e.jsx("input",{type:"text",value:j.name,onChange:e=>y(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter sequence name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("button",{type:"button",onClick:()=>y(e=>({...e,isActive:!e.isActive})),className:"flex items-center space-x-2 px-3 py-2 rounded-md transition-colors "+(j.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:[j.isActive?e.jsx(r,{className:"h-4 w-4"}):e.jsx(n,{className:"h-4 w-4"}),e.jsx("span",{children:j.isActive?"Active":"Inactive"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:j.description,onChange:e=>y(s=>({...s,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Describe the purpose of this email sequence"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Trigger Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trigger Type"}),e.jsx("select",{value:j.trigger.type,onChange:e=>y(s=>({...s,trigger:{...s.trigger,type:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"candidate-added",label:"Candidate Added"},{value:"status-changed",label:"Status Changed"},{value:"interview-scheduled",label:"Interview Scheduled"},{value:"offer-sent",label:"Offer Sent"},{value:"manual",label:"Manual Trigger"}].map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Initial Delay (hours)"}),e.jsx("input",{type:"number",value:j.trigger.delay||0,onChange:e=>y(s=>({...s,trigger:{...s.trigger,delay:parseInt(e.target.value)||0}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Email Templates"}),e.jsxs("button",{type:"button",onClick:()=>{const e={id:Date.now().toString(),subject:"",content:"",variables:[],delay:0===j.emails.length?0:24,conditions:{}};y(s=>({...s,emails:[...s.emails,e]})),v(e=>new Set([...e,j.emails.length]))},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Email"})]})]}),e.jsxs("div",{className:"space-y-4",children:[j.emails.map((s,t)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50",onClick:()=>(e=>{v(s=>{const t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})})(t),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-600 rounded-full text-sm font-medium",children:t+1}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.subject||`Email ${t+1}`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Delay: ",s.delay," hours after ",0===t?"trigger":"previous email"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),w(s)},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(i,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),(e=>{y(s=>({...s,emails:s.emails.filter((s,t)=>t!==e)})),v(s=>{const t=new Set;return s.forEach(s=>{s<e?t.add(s):s>e&&t.add(s-1)}),t})})(t)},className:"p-2 text-red-400 hover:text-red-600 transition-colors",children:e.jsx(c,{className:"h-4 w-4"})}),f.has(t)?e.jsx(o,{className:"h-4 w-4 text-gray-400"}):e.jsx(d,{className:"h-4 w-4 text-gray-400"})]})]}),f.has(t)&&e.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject Line"}),e.jsx("input",{type:"text",value:s.subject,onChange:e=>k(t,"subject",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delay (hours)"}),e.jsx("input",{type:"number",value:s.delay,onChange:e=>k(t,"delay",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Content"}),e.jsx("textarea",{value:s.content,onChange:e=>k(t,"content",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:6,placeholder:"Enter email content. Use {{variableName}} for dynamic content."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Variables"}),e.jsx("button",{type:"button",onClick:()=>{var e;k(e=t,"variables",[...j.emails[e].variables,{name:"",description:"",defaultValue:"",required:!1}])},className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Variable"})]}),s.variables.map((s,a)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"text",value:s.name,onChange:e=>C(t,a,"name",e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Variable name"}),e.jsx("input",{type:"text",value:s.description,onChange:e=>C(t,a,"description",e.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Description"}),e.jsx("button",{type:"button",onClick:()=>((e,s)=>{const t=j.emails[e].variables.filter((e,t)=>t!==s);k(e,"variables",t)})(t,a),className:"p-1 text-red-400 hover:text-red-600",children:e.jsx(c,{className:"h-3 w-3"})})]},a))]})]})]},s.id)),0===j.emails.length&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(t,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:'No emails added yet. Click "Add Email" to get started.'})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:b||!j.name,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(m,{className:"h-4 w-4"}),e.jsx("span",{children:b?"Saving...":"Save Sequence"})]})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Email Preview"}),e.jsx("button",{onClick:()=>w(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(a,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("strong",{children:"Subject:"})," ",N.subject]}),e.jsx("div",{className:"whitespace-pre-wrap bg-gray-50 p-4 rounded border",children:N.content})]})]})})]}):null},Q=({entityType:t,entityId:a,currentUser:r})=>{const{comments:n,tasks:i,fetchComments:c,addComment:o,fetchTasks:d,createTask:m,updateTask:N}=H(),[w,k]=s.useState("comments"),[C,S]=s.useState(""),[T,D]=s.useState({title:"",description:"",assignedTo:"",priority:"medium",dueDate:""}),[E,I]=s.useState(!1),[M,q]=s.useState("all"),[A,P]=s.useState(""),U=s.useRef(null);s.useEffect(()=>{t&&a&&(c(t,a),d(r.id))},[t,a,r.id,c,d]);const O=e=>{const s=/@(\w+)/g,t=[];let a;for(;null!==(a=s.exec(e));)t.push(a[1]);return t},$=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=e=>{switch(e){case"urgent":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},R=e=>{switch(e){case"completed":return"text-green-600 bg-green-100";case"in-progress":return"text-blue-600 bg-blue-100";case"pending":return"text-yellow-600 bg-yellow-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},L=i.filter(e=>{var s;const r="all"===M||e.status===M,n=e.title.toLowerCase().includes(A.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(A.toLowerCase())),l=!a||e[t+"Id"]===a;return r&&n&&l}),z=[{id:"user1",name:"John Doe",avatar:"/avatars/john.jpg"},{id:"user2",name:"Jane Smith",avatar:"/avatars/jane.jpg"},{id:"user3",name:"Mike Johnson",avatar:"/avatars/mike.jpg"}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6 py-4",children:[e.jsxs("button",{onClick:()=>k("comments"),className:"flex items-center space-x-2 pb-2 border-b-2 transition-colors "+("comments"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("span",{children:"Comments"}),e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:n.length})]}),e.jsxs("button",{onClick:()=>k("tasks"),className:"flex items-center space-x-2 pb-2 border-b-2 transition-colors "+("tasks"===w?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{children:"Tasks"}),e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:L.length})]})]})}),e.jsxs("div",{className:"p-6",children:["comments"===w&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),C.trim())try{await o({[t+"Id"]:a,content:C,author:r,mentions:O(C),attachments:[]}),S("")}catch(s){}},className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:U,value:C,onChange:e=>S(e.target.value),placeholder:"Add a comment... Use @username to mention team members",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3}),e.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center space-x-2",children:[e.jsx("button",{type:"button",className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(h,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(p,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:!C.trim(),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{children:"Post Comment"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[n.map(s=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:s.author.avatar?e.jsx("img",{src:s.author.avatar,alt:s.author.name,className:"h-8 w-8 rounded-full"}):e.jsx("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx(b,{className:"h-4 w-4 text-gray-600"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.author.name}),e.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),$(s.createdAt)]})]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.content}),s.mentions.length>0&&e.jsxs("div",{className:"mt-2 flex items-center space-x-1",children:[e.jsx(p,{className:"h-3 w-3 text-blue-500"}),e.jsxs("span",{className:"text-xs text-blue-600",children:["Mentioned: ",s.mentions.join(", ")]})]})]})})]},s.id)),0===n.length&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(x,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No comments yet. Start the conversation!"})]})]})]}),"tasks"===w&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:A,onChange:e=>P(e.target.value),placeholder:"Search tasks...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("select",{value:M,onChange:e=>q(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Tasks"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("button",{onClick:()=>I(!E),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Task"})]})]}),E&&e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),T.title.trim())try{await m({...T,[t+"Id"]:a,assignedBy:r.id,status:"pending"}),D({title:"",description:"",assignedTo:"",priority:"medium",dueDate:""}),I(!1)}catch(s){}},className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title"}),e.jsx("input",{type:"text",value:T.title,onChange:e=>D(s=>({...s,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter task title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assign To"}),e.jsxs("select",{value:T.assignedTo,onChange:e=>D(s=>({...s,assignedTo:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Select team member"}),z.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:T.description,onChange:e=>D(s=>({...s,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter task description"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:T.priority,onChange:e=>D(s=>({...s,priority:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:T.dueDate,onChange:e=>D(s=>({...s,dueDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Create Task"})]})]}),e.jsxs("div",{className:"space-y-3",children:[L.map(s=>{var t;return e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("button",{onClick:()=>(async(e,s)=>{const t="completed"===s?"pending":"completed";try{await N(e,{status:t,completedAt:"completed"===t?new Date:null})}catch(a){}})(s.id,s.status),className:"mt-1 text-gray-400 hover:text-blue-600 transition-colors",children:"completed"===s.status?e.jsx(u,{className:"h-5 w-5 text-green-600"}):e.jsx(f,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium "+("completed"===s.status?"line-through text-gray-500":"text-gray-900"),children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F(s.priority)}`,children:s.priority}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(s.status)}`,children:s.status})]})]}),s.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(b,{className:"h-3 w-3 mr-1"}),"Assigned to: ",(null==(t=z.find(e=>e.id===s.assignedTo))?void 0:t.name)||"Unknown"]}),s.dueDate&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),"Due: ",new Date(s.dueDate).toLocaleDateString()]})]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),$(s.createdAt)]})]})]})]})},s.id)}),0===L.length&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(u,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No tasks found. Create a task to get started!"})]})]})]})]})]})},K=({clientId:a,client:r})=>{const{clientInteractions:n=[],fetchClientInteractions:i,addClientInteraction:c,getClientPreferences:o,updateClientPreferences:d}=H(),[m,x]=s.useState("interactions"),[u,h]=s.useState(!1),[p,g]=s.useState(!1),[f,E]=s.useState(null),[I,M]=s.useState(!1),[q,A]=s.useState(null),[P,U]=s.useState("all"),[O,$]=s.useState(""),[F,R]=s.useState({type:"email",subject:"",content:"",participants:[],scheduledAt:"",outcome:"",followUpRequired:!1,followUpDate:""}),[L,z]=s.useState(!1),[J,V]=s.useState(null);s.useEffect(()=>{a&&(i(a),W())},[a]);const W=async()=>{M(!0),A(null);try{const e=await o(a);E(e||{})}catch(e){A((null==e?void 0:e.message)||"Failed to load preferences")}finally{M(!1)}},_=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",B=s=>{switch(s){case"email":return e.jsx(t,{className:"h-4 w-4"});case"call":return e.jsx(D,{className:"h-4 w-4"});case"meeting":return e.jsx(v,{className:"h-4 w-4"});case"note":default:return e.jsx(k,{className:"h-4 w-4"});case"proposal":case"contract":return e.jsx(C,{className:"h-4 w-4"})}},Y=e=>{switch(e){case"email":return"text-blue-600 bg-blue-50";case"call":return"text-green-600 bg-green-50";case"meeting":return"text-purple-600 bg-purple-50";case"note":default:return"text-gray-600 bg-gray-50";case"proposal":return"text-orange-600 bg-orange-50";case"contract":return"text-red-600 bg-red-50"}},G=s.useMemo(()=>n.filter(e=>{var s,t;const a="all"===P||e.type===P,r=O.toLowerCase(),n=((null==(s=e.subject)?void 0:s.toLowerCase())||"").includes(r)||((null==(t=e.content)?void 0:t.toLowerCase())||"").includes(r);return a&&n}),[n,P,O]),Q=[{value:"email",label:"Email"},{value:"call",label:"Phone Call"},{value:"meeting",label:"Meeting"},{value:"note",label:"Note"},{value:"proposal",label:"Proposal"},{value:"contract",label:"Contract"}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 font-poppins",children:[e.jsxs("div",{className:"border-b border-gray-200 p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(N,{className:"h-6 w-6 text-sky-700"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:(null==r?void 0:r.name)||"Client Relationship"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage interactions & preferences"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 px-4 py-2 bg-sky-700 text-white rounded-md hover:bg-sky-800 transition-colors",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Interaction"})]}),e.jsxs("button",{onClick:()=>{g(!0),f&&!q||W()},className:"flex items-center space-x-2 px-4 py-2 bg-white text-slate-700 border border-gray-200 rounded-md hover:shadow-sm transition-all",title:"Edit client preferences","aria-haspopup":"dialog",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Preferences"})]})]})]}),e.jsx("div",{className:"border-b border-gray-100",children:e.jsxs("nav",{className:"flex space-x-8 px-6 py-4",children:[e.jsxs("button",{onClick:()=>x("interactions"),className:"flex items-center space-x-2 pb-2 border-b-2 transition-colors "+("interactions"===m?"border-sky-600 text-sky-700":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{children:"Interactions"}),e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:n.length})]}),e.jsxs("button",{onClick:()=>x("timeline"),className:"flex items-center space-x-2 pb-2 border-b-2 transition-colors "+("timeline"===m?"border-sky-600 text-sky-700":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.jsx(j,{className:"h-4 w-4"}),e.jsx("span",{children:"Timeline"})]}),e.jsxs("button",{onClick:()=>x("analytics"),className:"flex items-center space-x-2 pb-2 border-b-2 transition-colors "+("analytics"===m?"border-sky-600 text-sky-700":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Analytics"})]})]})}),e.jsxs("div",{className:"p-6",children:["interactions"===m&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:O,onChange:e=>$(e.target.value),placeholder:"Search interactions...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("select",{value:P,onChange:e=>U(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"all",children:"All Types"}),Q.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("button",{onClick:()=>{const e=G.map(e=>[e.id,e.type,`"${(e.subject||"").replace(/"/g,'""')}"`,`"${(e.content||"").replace(/"/g,'""')}"`,e.createdAt,`"${(e.outcome||"").replace(/"/g,'""')}"`]),s=[["ID","Type","Subject","Content","Created At","Outcome"].join(","),...e.map(e=>e.join(","))].join("\n"),t=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`${(null==r?void 0:r.name)||"client"}-interactions.csv`,n.click(),URL.revokeObjectURL(a)},className:"flex items-center space-x-2 px-4 py-2 bg-white border border-gray-200 rounded-md hover:shadow-sm transition-all",children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[G.map(s=>{var t;return e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${Y(s.type)}`,children:B(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:s.subject}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y(s.type)}`,children:s.type})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:s.content}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),_(s.createdAt)]}),(null==(t=s.participants)?void 0:t.length)>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(b,{className:"h-3 w-3 mr-1"}),s.participants.length," participant(s)"]}),s.followUpRequired&&e.jsxs("span",{className:"flex items-center text-orange-600",children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),"Follow-up required"]})]}),s.outcome&&e.jsxs("div",{className:"mt-2 p-2 bg-sky-50 rounded text-sm",children:[e.jsx("strong",{children:"Outcome:"})," ",s.outcome]})]})]}),e.jsx("div",{className:"flex items-start space-x-2",children:e.jsx("button",{onClick:()=>(e=>{const s=n.find(s=>s.id===e);s&&(z(!0),V(e),R({type:s.type||"note",subject:s.subject||"",content:s.content||"",participants:s.participants||[],scheduledAt:s.scheduledAt||"",outcome:s.outcome||"",followUpRequired:!!s.followUpRequired,followUpDate:s.followUpDate||""}),h(!0))})(s.id),className:"p-2 text-gray-500 hover:text-gray-700 rounded-md","aria-label":"Edit interaction",children:e.jsx(T,{className:"h-4 w-4"})})})]})},s.id)}),0===G.length&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(k,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No interactions found. Add an interaction to get started!"})]})]})]}),"timeline"===m&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),n.slice().sort((e,s)=>new Date(s.createdAt)-new Date(e.createdAt)).map(s=>e.jsxs("div",{className:"relative flex items-start space-x-4 pb-6",children:[e.jsx("div",{className:`relative z-10 p-2 rounded-full ${Y(s.type)}`,children:B(s.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:s.subject}),e.jsx("span",{className:"text-xs text-gray-500",children:_(s.createdAt)})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.content})]})})]},s.id))]})}),"analytics"===m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-sky-50 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-sky-700",children:"Total Interactions"}),e.jsx("p",{className:"text-2xl font-bold text-sky-900",children:n.length})]}),e.jsx(k,{className:"h-8 w-8 text-sky-600"})]})}),e.jsx("div",{className:"bg-green-50 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.filter(e=>{const s=new Date(e.createdAt),t=new Date;return s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()}).length})]}),e.jsx(v,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-orange-50 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Follow-ups Due"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:n.filter(e=>e.followUpRequired&&new Date(e.followUpDate)<=new Date).length})]}),e.jsx(j,{className:"h-8 w-8 text-orange-600"})]})})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[L?"Edit":"Add"," Interaction"]}),e.jsx("button",{onClick:()=>{h(!1),z(!1),V(null)},className:"text-gray-400 hover:text-gray-600","aria-label":"Close interaction form",children:"×"})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{await c({...F,clientId:a,createdBy:"current-user",completedAt:"note"===F.type?new Date:null}),R({type:"email",subject:"",content:"",participants:[],scheduledAt:"",outcome:"",followUpRequired:!1,followUpDate:""}),h(!1),z(!1),V(null)}catch(s){}},className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsx("select",{value:F.type,onChange:e=>R(s=>({...s,type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500",children:Q.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),e.jsx("input",{type:"text",value:F.subject,onChange:e=>R(s=>({...s,subject:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500",placeholder:"Enter subject",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),e.jsx("textarea",{value:F.content,onChange:e=>R(s=>({...s,content:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500",rows:4,placeholder:"Enter interaction details",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outcome"}),e.jsx("input",{type:"text",value:F.outcome,onChange:e=>R(s=>({...s,outcome:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500",placeholder:"Enter outcome (optional)"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2 mt-6",children:[e.jsx("input",{type:"checkbox",checked:F.followUpRequired,onChange:e=>R(s=>({...s,followUpRequired:e.target.checked})),className:"rounded border-gray-300 text-sky-600 focus:ring-sky-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Follow-up required"})]})})]}),F.followUpRequired&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Follow-up Date"}),e.jsx("input",{type:"datetime-local",value:F.followUpDate,onChange:e=>R(s=>({...s,followUpDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),z(!1),V(null)},className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-sky-700 text-white rounded-md hover:bg-sky-800 transition-colors",children:L?"Save Changes":"Add Interaction"})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Client Preferences"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Close preferences",children:"×"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[I&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-sky-700 mb-4"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading preferences..."})]}),!I&&q&&e.jsxs("div",{className:"p-4 border border-red-100 bg-red-50 rounded",children:[e.jsx("p",{className:"text-sm text-red-700 mb-2",children:q}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>{W()},className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Retry"}),e.jsx("button",{onClick:()=>{g(!1)},className:"px-3 py-2 bg-white border border-gray-200 rounded-md hover:shadow-sm transition-all",children:"Close"})]})]}),!I&&!q&&f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Communication Method"}),e.jsxs("select",{value:f.communicationMethod||"email",onChange:e=>E(s=>({...s,communicationMethod:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"phone",children:"Phone"}),e.jsx("option",{value:"sms",children:"SMS"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Communication Frequency"}),e.jsxs("select",{value:f.frequency||"weekly",onChange:e=>E(s=>({...s,frequency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"bi-weekly",children:"Bi-weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred Start Time"}),e.jsx("input",{type:"time",value:f.preferredTime&&f.preferredTime.start||"",onChange:e=>E(s=>({...s,preferredTime:{...s.preferredTime||{},start:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preferred End Time"}),e.jsx("input",{type:"time",value:f.preferredTime&&f.preferredTime.end||"",onChange:e=>E(s=>({...s,preferredTime:{...s.preferredTime||{},end:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>(async e=>{try{M(!0),await d(a,e),E(e),g(!1),A(null)}catch(s){A((null==s?void 0:s.message)||"Failed to save preferences")}finally{M(!1)}})(f),className:"px-4 py-2 bg-sky-700 text-white rounded-md hover:bg-sky-800 transition-colors",disabled:I,children:"Save Preferences"})]})]})]})]})})]})},X=()=>{const{socialMediaIntegrations:t,fetchSocialMediaIntegrations:a,connectSocialMedia:r,postToSocialMedia:n,loading:c}=H(),[o,d]=s.useState("integrations"),[m,u]=s.useState(!1),[h,p]=s.useState(null),[g,b]=s.useState({platform:"linkedin",content:"",jobId:"",scheduledAt:"",status:"draft"}),[y,f]=s.useState([{id:"1",platform:"linkedin",content:"We are hiring! Looking for a Senior Software Engineer with React experience. Join our amazing team! #hiring #react #javascript",jobId:"job1",publishedAt:new Date("2024-01-15T10:30:00"),status:"published",engagement:{likes:45,shares:12,comments:8,clicks:156}},{id:"2",platform:"twitter",content:"Great opportunity for a Product Manager in San Francisco! Remote work available. Apply now! #productmanager #remote #jobs",jobId:"job2",scheduledAt:new Date("2024-01-20T14:00:00"),status:"scheduled",engagement:{likes:0,shares:0,comments:0,clicks:0}}]);s.useEffect(()=>{a()},[a]);const v=s=>{switch(s){case"linkedin":return e.jsx(O,{className:"h-5 w-5"});case"twitter":return e.jsx(U,{className:"h-5 w-5"});case"facebook":return e.jsx(P,{className:"h-5 w-5"});default:return e.jsx(E,{className:"h-5 w-5"})}},N=e=>{switch(e){case"linkedin":return"text-blue-600 bg-blue-100 border-blue-200";case"twitter":return"text-sky-600 bg-sky-100 border-sky-200";case"facebook":return"text-blue-800 bg-blue-100 border-blue-200";default:return"text-gray-600 bg-gray-100 border-gray-200"}},k=s=>{switch(s){case"published":return e.jsx(F,{className:"h-4 w-4 text-green-600"});case"scheduled":return e.jsx(j,{className:"h-4 w-4 text-yellow-600"});case"failed":return e.jsx($,{className:"h-4 w-4 text-red-600"});default:return e.jsx(i,{className:"h-4 w-4 text-gray-600"})}},C=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),S=y.reduce((e,s)=>({likes:e.likes+s.engagement.likes,shares:e.shares+s.engagement.shares,comments:e.comments+s.engagement.comments,clicks:e.clicks+s.engagement.clicks}),{likes:0,shares:0,comments:0,clicks:0});return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Social Media Integration"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Connect and manage your social media presence"})]})]}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Post"})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6 py-4",children:[e.jsxs("button",{onClick:()=>d("integrations"),className:"flex items-center space-x-2 pb-2 border-b-2 transition-colors "+("integrations"===o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Integrations"})]}),e.jsxs("button",{onClick:()=>d("posts"),className:"flex items-center space-x-2 pb-2 border-b-2 transition-colors "+("posts"===o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:"Posts"}),e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:y.length})]}),e.jsxs("button",{onClick:()=>d("analytics"),className:"flex items-center space-x-2 pb-2 border-b-2 transition-colors "+("analytics"===o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:"Analytics"})]})]})}),e.jsxs("div",{className:"p-6",children:["integrations"===o&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${N(s.platform)}`,children:v(s.platform)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 capitalize",children:s.platform}),e.jsx("p",{className:"text-sm text-gray-500",children:s.isConnected?"Connected":"Not connected"})]})]}),e.jsx("div",{className:"w-3 h-3 rounded-full "+(s.isConnected?"bg-green-400":"bg-gray-300")})]}),s.isConnected?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-600",children:e.jsxs("p",{children:["Permissions: ",s.permissions.join(", ")]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>{s.platform},className:"flex items-center space-x-1 px-3 py-2 text-red-600 bg-red-50 rounded-md hover:bg-red-100 transition-colors text-sm",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{children:"Disconnect"})]}),e.jsxs("button",{className:"flex items-center space-x-1 px-3 py-2 text-gray-600 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors text-sm",children:[e.jsx(w,{className:"h-3 w-3"}),e.jsx("span",{children:"Settings"})]})]})]}):e.jsxs("button",{onClick:()=>p(s.platform),className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:"Connect"})]})]},s.platform))}),"posts"===o&&e.jsxs("div",{className:"space-y-4",children:[y.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${N(s.platform)}`,children:v(s.platform)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900 capitalize",children:s.platform}),e.jsxs("div",{className:"flex items-center space-x-1",children:[k(s.status),e.jsx("span",{className:"text-sm text-gray-500 capitalize",children:s.status})]})]}),e.jsx("p",{className:"text-gray-700 mb-3 line-clamp-3",children:s.content}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s.publishedAt&&e.jsxs("span",{children:["Published: ",C(s.publishedAt)]}),s.scheduledAt&&e.jsxs("span",{children:["Scheduled: ",C(s.scheduledAt)]})]}),"published"===s.status&&e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(A,{className:"h-3 w-3"}),e.jsx("span",{children:s.engagement.likes})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(E,{className:"h-3 w-3"}),e.jsx("span",{children:s.engagement.shares})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(x,{className:"h-3 w-3"}),e.jsx("span",{children:s.engagement.comments})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(i,{className:"h-3 w-3"}),e.jsx("span",{children:s.engagement.clicks})]})]})]})]})]})})},s.id)),0===y.length&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(E,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No posts yet. Create your first social media post!"})]})]}),"analytics"===o&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-blue-50 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Posts"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:y.length})]}),e.jsx(E,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-green-50 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total Likes"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:S.likes})]}),e.jsx(A,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-purple-50 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Total Shares"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:S.shares})]}),e.jsx(E,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-orange-50 p-6 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Total Clicks"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:S.clicks})]}),e.jsx(i,{className:"h-8 w-8 text-orange-600"})]})})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create Social Media Post"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={...g,publishedAt:g.scheduledAt?null:new Date,status:g.scheduledAt?"scheduled":"published"},s=await n(e);f(e=>[...e,{...s,engagement:{likes:0,shares:0,comments:0,clicks:0}}]),b({platform:"linkedin",content:"",jobId:"",scheduledAt:"",status:"draft"}),u(!1)}catch(s){}},className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Platform"}),e.jsxs("select",{value:g.platform,onChange:e=>b(s=>({...s,platform:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"twitter",children:"Twitter"}),e.jsx("option",{value:"facebook",children:"Facebook"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Related Job (Optional)"}),e.jsxs("select",{value:g.jobId,onChange:e=>b(s=>({...s,jobId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a job"}),e.jsx("option",{value:"job1",children:"Senior Software Engineer"}),e.jsx("option",{value:"job2",children:"Product Manager"}),e.jsx("option",{value:"job3",children:"UX Designer"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),e.jsx("textarea",{value:g.content,onChange:e=>b(s=>({...s,content:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:6,placeholder:"Write your post content...",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.content.length,"/280 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Schedule (Optional)"}),e.jsx("input",{type:"datetime-local",value:g.scheduledAt,onChange:e=>b(s=>({...s,scheduledAt:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to post immediately"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:g.scheduledAt?"Schedule Post":"Post Now"})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Connect ",h]}),e.jsx("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`inline-flex p-4 rounded-full ${N(h)} mb-4`,children:v(h)}),e.jsxs("p",{className:"text-gray-600",children:["Connect your ",h," account to start posting job opportunities and engaging with candidates."]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>p(null),className:"flex-1 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>(async e=>{try{await r(e,"mock-auth-code"),p(null)}catch(s){}})(h),disabled:c,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:c?"Connecting...":"Connect"})]})]})]})})]})},Z=()=>{var t,a;const{videoConferenceIntegrations:r,fetchVideoConferenceIntegrations:n,connectVideoConference:i,createMeeting:o,loading:d}=H(),[m,x]=s.useState("integrations"),[u,h]=s.useState(!1),[p,g]=s.useState(null),[b,y]=s.useState([{id:"1",provider:"zoom",meetingId:"123-456-789",joinUrl:"https://zoom.us/j/123456789",password:"abc123",title:"Interview with John Doe",description:"Technical interview for Senior Developer position",startTime:new Date("2024-01-20T14:00:00"),duration:60,participants:[{email:"john.doe@email.com",name:"John Doe",role:"participant"},{email:"interviewer@company.com",name:"Sarah Smith",role:"host"}],candidateId:"candidate1",interviewId:"interview1",status:"scheduled"},{id:"2",provider:"teams",meetingId:"987-654-321",joinUrl:"https://teams.microsoft.com/l/meetup-join/...",title:"Client Meeting - TechCorp",description:"Discuss new job requirements",startTime:new Date("2024-01-22T10:00:00"),duration:45,participants:[{email:"client@techcorp.com",name:"Mike Johnson",role:"participant"},{email:"recruiter@company.com",name:"Jane Wilson",role:"host"}],status:"scheduled"}]),[f,N]=s.useState({provider:"zoom",title:"",description:"",startTime:"",duration:60,participants:[{email:"",name:"",role:"participant"}],candidateId:"",interviewId:"",settings:{waitingRoom:!0,recording:!1,password:!0}});s.useEffect(()=>{n()},[n]);const k=(e,s,t)=>{N(a=>({...a,participants:a.participants.map((a,r)=>r===e?{...a,[s]:t}:a)}))},C=e=>{navigator.clipboard.writeText(e)},S=s=>{switch(s){case"zoom":case"meet":case"webex":default:return e.jsx(R,{className:"h-5 w-5"});case"teams":return e.jsx(L,{className:"h-5 w-5"})}},D=e=>{switch(e){case"zoom":return"text-blue-600 bg-blue-100 border-blue-200";case"teams":return"text-purple-600 bg-purple-100 border-purple-200";case"meet":return"text-green-600 bg-green-100 border-green-200";case"webex":return"text-orange-600 bg-orange-100 border-orange-200";default:return"text-gray-600 bg-gray-100 border-gray-200"}},E=s=>{switch(s){case"scheduled":return e.jsx(j,{className:"h-4 w-4 text-blue-600"});case"started":return e.jsx(R,{className:"h-4 w-4 text-green-600"});case"ended":return e.jsx(F,{className:"h-4 w-4 text-gray-600"});case"cancelled":return e.jsx($,{className:"h-4 w-4 text-red-600"});default:return e.jsx(j,{className:"h-4 w-4 text-gray-600"})}},I=[{id:"zoom",name:"Zoom",description:"Video conferencing and webinars"},{id:"teams",name:"Microsoft Teams",description:"Collaboration and meetings"},{id:"meet",name:"Google Meet",description:"Simple video meetings"},{id:"webex",name:"Cisco Webex",description:"Enterprise video conferencing"}];return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Video Conference Integration"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Connect and manage video conferencing platforms"})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Meeting"})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8 px-6 py-4",children:[e.jsxs("button",{onClick:()=>x("integrations"),className:"flex items-center space-x-2 pb-2 border-b-2 transition-colors "+("integrations"===m?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Integrations"})]}),e.jsxs("button",{onClick:()=>x("meetings"),className:"flex items-center space-x-2 pb-2 border-b-2 transition-colors "+("meetings"===m?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:"Meetings"}),e.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:b.length})]})]})}),e.jsxs("div",{className:"p-6",children:["integrations"===m&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.map(s=>{var t,a;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${D(s.provider)}`,children:S(s.provider)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:(null==(t=I.find(e=>e.id===s.provider))?void 0:t.name)||s.provider}),e.jsx("p",{className:"text-sm text-gray-500",children:s.isConnected?"Connected":"Not connected"})]})]}),e.jsx("div",{className:"w-3 h-3 rounded-full "+(s.isConnected?"bg-green-400":"bg-gray-300")})]}),s.isConnected?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Default Settings"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(j,{className:"h-3 w-3"}),e.jsxs("span",{children:["Duration: ",s.defaultSettings.duration,"min"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(L,{className:"h-3 w-3"}),e.jsxs("span",{children:["Waiting Room: ",s.defaultSettings.waitingRoom?"On":"Off"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{className:"h-3 w-3"}),e.jsxs("span",{children:["Recording: ",s.defaultSettings.recording?"On":"Off"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(z,{className:"h-3 w-3"}),e.jsxs("span",{children:["Password: ",s.defaultSettings.password?"On":"Off"]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"flex items-center space-x-1 px-3 py-2 text-red-600 bg-red-50 rounded-md hover:bg-red-100 transition-colors text-sm",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{children:"Disconnect"})]}),e.jsxs("button",{className:"flex items-center space-x-1 px-3 py-2 text-gray-600 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors text-sm",children:[e.jsx(w,{className:"h-3 w-3"}),e.jsx("span",{children:"Settings"})]})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:null==(a=I.find(e=>e.id===s.provider))?void 0:a.description}),e.jsxs("button",{onClick:()=>g(s.provider),className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:"Connect"})]})]})]},s.provider)})}),"meetings"===m&&e.jsxs("div",{className:"space-y-4",children:[b.map(s=>{return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg ${D(s.provider)}`,children:S(s.provider)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-1",children:[E(s.status),e.jsx("span",{className:"text-sm text-gray-500 capitalize",children:s.status})]})]}),s.description&&e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:s.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx("span",{children:(t=s.startTime,new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(j,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.duration," minutes"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.participants.length," participants"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Meeting ID:"}),e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:s.meetingId}),e.jsx("button",{onClick:()=>C(s.meetingId),className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(J,{className:"h-3 w-3"})})]}),s.password&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Password:"}),e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:s.password}),e.jsx("button",{onClick:()=>C(s.password),className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(J,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("a",{href:s.joinUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 text-sm",children:[e.jsx(V,{className:"h-3 w-3"}),e.jsx("span",{children:"Join Meeting"})]}),e.jsx("button",{onClick:()=>C(s.joinUrl),className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(J,{className:"h-3 w-3"})})]})]})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Participants"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.participants.map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 px-2 py-1 rounded text-sm",children:[e.jsx("span",{children:s.name}),"host"===s.role&&e.jsx("span",{className:"text-blue-600",children:"(Host)"})]},t))})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-2 text-red-400 hover:text-red-600 transition-colors",children:e.jsx(c,{className:"h-4 w-4"})})]})]})},s.id);var t}),0===b.length&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(R,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No meetings scheduled. Create your first meeting!"})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create Video Meeting"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={...f,startTime:new Date(f.startTime)},s=await o(e);y(e=>[...e,{...s,status:"scheduled"}]),N({provider:"zoom",title:"",description:"",startTime:"",duration:60,participants:[{email:"",name:"",role:"participant"}],candidateId:"",interviewId:"",settings:{waitingRoom:!0,recording:!1,password:!0}}),h(!1)}catch(s){}},className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Platform"}),e.jsx("select",{value:f.provider,onChange:e=>N(s=>({...s,provider:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:r.filter(e=>e.isConnected).map(s=>{var t;return e.jsx("option",{value:s.provider,children:(null==(t=I.find(e=>e.id===s.provider))?void 0:t.name)||s.provider},s.provider)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),e.jsx("input",{type:"number",value:f.duration,onChange:e=>N(s=>({...s,duration:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"15",max:"480"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Title"}),e.jsx("input",{type:"text",value:f.title,onChange:e=>N(s=>({...s,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter meeting title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:e=>N(s=>({...s,description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter meeting description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"datetime-local",value:f.startTime,onChange:e=>N(s=>({...s,startTime:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Participants"}),e.jsx("button",{type:"button",onClick:()=>{N(e=>({...e,participants:[...e.participants,{email:"",name:"",role:"participant"}]}))},className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Add Participant"})]}),e.jsx("div",{className:"space-y-3",children:f.participants.map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"email",value:s.email,onChange:e=>k(t,"email",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Email address",required:!0}),e.jsx("input",{type:"text",value:s.name,onChange:e=>k(t,"name",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Name",required:!0}),e.jsxs("select",{value:s.role,onChange:e=>k(t,"role",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"participant",children:"Participant"}),e.jsx("option",{value:"co-host",children:"Co-host"}),e.jsx("option",{value:"host",children:"Host"})]}),f.participants.length>1&&e.jsx("button",{type:"button",onClick:()=>(e=>{N(s=>({...s,participants:s.participants.filter((s,t)=>t!==e)}))})(t),className:"p-2 text-red-400 hover:text-red-600",children:e.jsx(c,{className:"h-4 w-4"})})]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Meeting Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:f.settings.waitingRoom,onChange:e=>N(s=>({...s,settings:{...s.settings,waitingRoom:e.target.checked}})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Enable waiting room"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:f.settings.recording,onChange:e=>N(s=>({...s,settings:{...s.settings,recording:e.target.checked}})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-record meeting"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:f.settings.password,onChange:e=>N(s=>({...s,settings:{...s.settings,password:e.target.checked}})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Require meeting password"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:d?"Creating...":"Create Meeting"})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Connect ",null==(t=I.find(e=>e.id===p))?void 0:t.name]}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`inline-flex p-4 rounded-full ${D(p)} mb-4`,children:S(p)}),e.jsxs("p",{className:"text-gray-600",children:["Connect your ",null==(a=I.find(e=>e.id===p))?void 0:a.name," account to create and manage video meetings directly from the platform."]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>g(null),className:"flex-1 px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>(async e=>{try{await i(e,{clientId:"mock-client-id",clientSecret:"mock-client-secret"}),g(null)}catch(s){}})(p),disabled:d,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:d?"Connecting...":"Connect"})]})]})]})})]})},ee=({candidateId:r,isOpen:n,onClose:l})=>{const{getCommunicationPreferences:i,updateCommunicationPreferences:c,loading:o}=H(),[d,x]=s.useState({candidateId:r,email:{enabled:!0,frequency:"weekly",types:["job-updates","interview-reminders"]},sms:{enabled:!1,number:"",types:[]},phone:{enabled:!0,number:"",preferredTime:{start:"09:00",end:"17:00",timezone:"UTC"}},optOut:{all:!1,marketing:!1,transactional:!1,date:null,reason:""}}),[u,h]=s.useState(!1),[p,g]=s.useState(null);s.useEffect(()=>{r&&n&&b()},[r,n]);const b=async()=>{try{const e=await i(r);x(e),h(!1)}catch(e){}},j=async()=>{try{g("saving"),await c(r,d),g("saved"),h(!1),setTimeout(()=>g(null),2e3)}catch(e){g("error"),setTimeout(()=>g(null),3e3)}},y=(e,s,t)=>{x(a=>({...a,[e]:{...a[e],[s]:t}})),h(!0)},f=(e,s,t,a)=>{x(r=>({...r,[e]:{...r[e],[s]:{...r[e][s],[t]:a}}})),h(!0)},v=(e,s)=>{const t=d[e].types,a=t.includes(s)?t.filter(e=>e!==s):[...t,s];y(e,"types",a)},N=(e,s)=>{"all"===e&&s?x(e=>({...e,optOut:{...e.optOut,all:!0,marketing:!0,transactional:!1,date:new Date,reason:e.optOut.reason}})):(y("optOut",e,s),"all"!==e&&y("optOut","date",s?new Date:null)),h(!0)},C=[{id:"job-updates",label:"Job Updates",description:"New job opportunities matching your profile"},{id:"interview-reminders",label:"Interview Reminders",description:"Upcoming interview notifications"},{id:"application-status",label:"Application Status",description:"Updates on your job applications"},{id:"market-insights",label:"Market Insights",description:"Industry trends and salary reports"},{id:"company-news",label:"Company News",description:"Updates from companies you're interested in"},{id:"career-tips",label:"Career Tips",description:"Professional development content"}];return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Communication Preferences"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage how and when you want to be contacted"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[u&&e.jsx("button",{onClick:j,disabled:o,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"saving"===p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Saving..."})]}):"saved"===p?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{children:"Saved"})]}):"error"===p?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Error"})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"h-4 w-4"}),e.jsx("span",{children:"Save Changes"})]})}),e.jsx("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(a,{className:"h-6 w-6"})})]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] space-y-8",children:[(d.optOut.all||d.optOut.marketing)&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(_,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-yellow-800",children:"Communication Restrictions"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:d.optOut.all?"You have opted out of all communications except essential transactional messages.":"You have opted out of marketing communications."}),d.optOut.date&&e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["Opted out on: ",new Date(d.optOut.date).toLocaleDateString()]})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(t,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Email Communications"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.email.enabled,onChange:e=>y("email","enabled",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:d.optOut.all}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Enable email communications"})]})]}),d.email.enabled&&!d.optOut.all&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Frequency"}),e.jsx("select",{value:d.email.frequency,onChange:e=>y("email","frequency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"immediate",label:"Immediate"},{value:"daily",label:"Daily Digest"},{value:"weekly",label:"Weekly Summary"},{value:"monthly",label:"Monthly Newsletter"}].map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Email Types"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:C.map(s=>e.jsxs("label",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.email.types.includes(s.id),onChange:()=>v("email",s.id),className:"mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:d.optOut.marketing&&["market-insights","company-news","career-tips"].includes(s.id)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.label}),e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]})]},s.id))})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(k,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"SMS Communications"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.sms.enabled,onChange:e=>y("sms","enabled",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:d.optOut.all}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Enable SMS communications"})]})]}),d.sms.enabled&&!d.optOut.all&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:d.sms.number,onChange:e=>y("sms","number",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"SMS Types (Limited to essential communications)"}),e.jsx("div",{className:"space-y-2",children:C.filter(e=>["interview-reminders","application-status"].includes(e.id)).map(s=>e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:d.sms.types.includes(s.id),onChange:()=>v("sms",s.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.label}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:s.description})]})]},s.id))})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{className:"h-5 w-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Phone Communications"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.phone.enabled,onChange:e=>y("phone","enabled",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:d.optOut.all}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Allow phone calls"})]})]}),d.phone.enabled&&!d.optOut.all&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:d.phone.number,onChange:e=>y("phone","number",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Start Time"}),e.jsx("input",{type:"time",value:d.phone.preferredTime.start,onChange:e=>f("phone","preferredTime","start",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred End Time"}),e.jsx("input",{type:"time",value:d.phone.preferredTime.end,onChange:e=>f("phone","preferredTime","end",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),e.jsx("select",{value:d.phone.preferredTime.timezone,onChange:e=>f("phone","preferredTime","timezone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time"},{value:"America/Chicago",label:"Central Time"},{value:"America/Denver",label:"Mountain Time"},{value:"America/Los_Angeles",label:"Pacific Time"},{value:"Europe/London",label:"GMT"},{value:"Europe/Paris",label:"Central European Time"},{value:"Asia/Tokyo",label:"Japan Time"},{value:"Asia/Shanghai",label:"China Time"},{value:"Australia/Sydney",label:"Australian Eastern Time"}].map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(z,{className:"h-5 w-5 text-red-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Privacy Controls"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",checked:d.optOut.marketing,onChange:e=>N("marketing",e.target.checked),className:"mt-1 rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Opt out of marketing communications"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Stop receiving promotional emails, career tips, and market insights"})]})]}),e.jsxs("label",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",checked:d.optOut.all,onChange:e=>N("all",e.target.checked),className:"mt-1 rounded border-gray-300 text-red-600 focus:ring-red-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Opt out of all communications"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Stop all communications except essential transactional messages (interview confirmations, application updates)"})]})]}),(d.optOut.marketing||d.optOut.all)&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for opting out (optional)"}),e.jsx("textarea",{value:d.optOut.reason,onChange:e=>y("optOut","reason",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Help us improve by telling us why you're opting out..."})]})]})]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(B,{className:"h-5 w-5 text-gray-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium mb-1",children:"Important Notice"}),e.jsx("p",{children:"Even if you opt out of communications, we may still send you essential transactional messages related to your applications, interviews, and account security. You can update these preferences at any time. For more information, please review our Privacy Policy."})]})]})})]}),u&&e.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"You have unsaved changes"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{b(),h(!1)},className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Discard Changes"}),e.jsx("button",{onClick:j,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"Save Changes"})]})]})})]})}):null},se=()=>{const{emailSequences:a,fetchEmailSequences:r,fetchSocialMediaIntegrations:n,fetchVideoConferenceIntegrations:i}=H(),[c,o]=s.useState("overview"),[d,m]=s.useState(!1),[u,h]=s.useState(!1),[p,g]=s.useState(null),[b,j]=s.useState(null),[y,f]=s.useState({totalEmails:1250,emailOpenRate:68.5,totalMeetings:45,activeSequences:8,teamTasks:12,clientInteractions:156}),[v,N]=s.useState([{id:"1",type:"email_sent",description:"Welcome sequence email sent to John Doe",timestamp:new Date("2024-01-15T10:30:00"),user:"Sarah Wilson"},{id:"2",type:"meeting_created",description:"Interview meeting scheduled with TechCorp",timestamp:new Date("2024-01-15T09:15:00"),user:"Mike Johnson"},{id:"3",type:"task_completed",description:"Follow-up task completed for candidate Jane Smith",timestamp:new Date("2024-01-15T08:45:00"),user:"Lisa Chen"}]);s.useEffect(()=>{r(),n(),i()},[r,n,i]);const k=()=>{g(null),m(!0)},C=s=>{switch(s){case"email_sent":return e.jsx(t,{className:"h-4 w-4 text-blue-600"});case"meeting_created":return e.jsx(R,{className:"h-4 w-4 text-green-600"});case"task_completed":return e.jsx(L,{className:"h-4 w-4 text-purple-600"});default:return e.jsx(B,{className:"h-4 w-4 text-gray-600"})}},S=[{id:"overview",label:"Overview",icon:I},{id:"email-sequences",label:"Email Sequences",icon:t},{id:"team-collaboration",label:"Team Collaboration",icon:L},{id:"client-management",label:"Client Management",icon:x},{id:"social-media",label:"Social Media",icon:E},{id:"video-conference",label:"Video Conference",icon:R},{id:"preferences",label:"Preferences",icon:w}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(x,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Communication & Collaboration"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage all your communication channels and team collaboration"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:k,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{children:"New Sequence"})]})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("nav",{className:"flex space-x-8 overflow-x-auto py-4",children:S.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>o(s.id),className:"flex items-center space-x-2 px-3 py-2 rounded-lg whitespace-nowrap transition-colors "+(c===s.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[e.jsx(t,{className:"h-4 w-4"}),e.jsx("span",{children:s.label})]},s.id)})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["overview"===c&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Emails Sent"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalEmails.toLocaleString()}),e.jsx("p",{className:"text-sm text-green-600",children:"↑ 12% from last month"})]}),e.jsx(t,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Email Open Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[y.emailOpenRate,"%"]}),e.jsx("p",{className:"text-sm text-green-600",children:"↑ 3.2% from last month"})]}),e.jsx(I,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Video Meetings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.totalMeetings}),e.jsx("p",{className:"text-sm text-blue-600",children:"This month"})]}),e.jsx(R,{className:"h-8 w-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Sequences"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.activeSequences}),e.jsx("p",{className:"text-sm text-gray-600",children:"Email sequences running"})]}),e.jsx(w,{className:"h-8 w-8 text-orange-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Team Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.teamTasks}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Pending completion"})]}),e.jsx(L,{className:"h-8 w-8 text-cyan-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Client Interactions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.clientInteractions}),e.jsx("p",{className:"text-sm text-gray-600",children:"This month"})]}),e.jsx(x,{className:"h-8 w-8 text-red-600"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Activity"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:v.map(s=>{return e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:C(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:s.user}),e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx("span",{className:"text-xs text-gray-500",children:(t=s.timestamp,new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]})]})]},s.id);var t})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:k,className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-sm transition-shadow text-left",children:[e.jsx(t,{className:"h-6 w-6 text-blue-600 mb-2"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Create Email Sequence"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Set up automated email campaigns"})]}),e.jsxs("button",{onClick:()=>o("video-conference"),className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-sm transition-shadow text-left",children:[e.jsx(R,{className:"h-6 w-6 text-purple-600 mb-2"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Schedule Meeting"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create video conference meetings"})]}),e.jsxs("button",{onClick:()=>o("social-media"),className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-sm transition-shadow text-left",children:[e.jsx(E,{className:"h-6 w-6 text-green-600 mb-2"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Social Media Post"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Share job opportunities online"})]}),e.jsxs("button",{onClick:()=>o("team-collaboration"),className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-sm transition-shadow text-left",children:[e.jsx(L,{className:"h-6 w-6 text-orange-600 mb-2"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Team Collaboration"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage tasks and comments"})]})]})]}),"email-sequences"===c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Email Sequences"}),e.jsxs("button",{onClick:k,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(l,{className:"h-4 w-4"}),e.jsx("span",{children:"Create Sequence"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(s=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-sm transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(s.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:s.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Emails"}),e.jsx("p",{className:"font-medium",children:s.emails.length})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Open Rate"}),e.jsxs("p",{className:"font-medium",children:[(s.stats.opened/s.stats.sent*100).toFixed(1),"%"]})]})]}),e.jsx("button",{onClick:()=>(e=>{g(e),m(!0)})(s),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Edit Sequence"})]},s.id))})]}),"team-collaboration"===c&&e.jsx(Q,{entityType:"general",entityId:"dashboard",currentUser:{id:"user1",name:"Current User",avatar:"/avatars/current-user.jpg"}}),"client-management"===c&&e.jsx(K,{clientId:"client1",client:{name:"TechCorp Inc."}}),"social-media"===c&&e.jsx(X,{}),"video-conference"===c&&e.jsx(Z,{}),"preferences"===c&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Communication Settings"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Manage global communication preferences and system settings."}),e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Open Preferences"})]})]}),e.jsx(G,{isOpen:d,onClose:()=>{m(!1),g(null)},sequence:p}),e.jsx(ee,{candidateId:"candidate1",isOpen:u,onClose:()=>h(!1)})]})};export{se as default};
