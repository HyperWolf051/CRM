import{r as e}from"./react-vendor-DD48japz.js";import{c as a,d as s}from"./index-LnfGub8m.js";const t=()=>{const[t,c]=e.useState([]),[r,n]=e.useState(!0),[o,l]=e.useState(null),{handleError:u,executeWithErrorHandling:d}=a(),i=e.useCallback(async()=>{try{n(!0),l(null);const e=await s.get("/contacts");c(e.data)}catch(e){const a=e.userMessage||e.message||"Failed to fetch contacts";l(a),u(e,{defaultMessage:"Failed to load contacts"})}finally{n(!1)}},[u]),g=e.useCallback(async e=>{try{const a=(await d(()=>s.post("/contacts",e),{successMessage:"Contact created successfully!",errorMessage:"Failed to create contact",enableRetry:!0})).data;return c(e=>[a,...e]),{success:!0,data:a}}catch(a){return{success:!1,error:a.userMessage||a.message}}},[d]),y=e.useCallback(async(e,a)=>{try{const t=(await d(()=>s.put(`/contacts/${e}`,a),{successMessage:"Contact updated successfully!",errorMessage:"Failed to update contact",enableRetry:!0})).data;return c(a=>a.map(a=>a.id===e?t:a)),{success:!0,data:t}}catch(t){return{success:!1,error:t.userMessage||t.message}}},[d]),f=e.useCallback(async e=>{try{return await d(()=>s.delete(`/contacts/${e}`),{successMessage:"Contact deleted successfully!",errorMessage:"Failed to delete contact",enableRetry:!0}),c(a=>a.filter(a=>a.id!==e)),{success:!0}}catch(a){return{success:!1,error:a.userMessage||a.message}}},[d]),h=e.useCallback(async e=>{var a,t;try{return{success:!0,data:(await s.get(`/contacts/${e}`)).data}}catch(c){return{success:!1,error:(null==(t=null==(a=c.response)?void 0:a.data)?void 0:t.message)||c.message||"Failed to fetch contact"}}},[]),C=e.useCallback(async e=>{try{n(!0),l(null);const a=await s.get("/contacts",{params:{search:e}});c(a.data)}catch(a){const e=a.userMessage||a.message||"Failed to search contacts";l(e),u(a,{defaultMessage:"Failed to search contacts"})}finally{n(!1)}},[u]);return e.useEffect(()=>{i()},[i]),{contacts:t,loading:r,error:o,refetch:i,createContact:g,updateContact:y,deleteContact:f,getContact:h,searchContacts:C}};export{t as u};
