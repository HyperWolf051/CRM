import{j as e,B as s,C as a,I as t}from"./index-CovdTvDO.js";import{r as l}from"./react-vendor-DD48japz.js";import{E as r}from"./EmptyState-B504n3Gj.js";import{B as n}from"./BulkActionsPanel-BSA3iNKf.js";import{C as i}from"./csvService-DMgoVriE.js";import{M as c}from"./Modal-BRF5mHqC.js";import{j as d,n as o,E as m,e as x,B as u,Y as g,D as h,T as p,G as y,ap as b,K as j,c as f,F as N,y as v,a as w,ad as S,l as k,r as C,J as D,X as A,q as B,V as I,aj as T,U as P,d as E,a1 as R,ag as U,a0 as F,aD as L,Q as $,z as _,t as M,ar as O,an as H,W as V,C as q,a7 as z,p as J,_ as K,a3 as G,a2 as Y}from"./icons-vendor-Cvv-27T5.js";import{R as W,c as X}from"./candidateUtils-CAE7rsIc.js";import{a as Q}from"./router-vendor-CA0F1SnT.js";import"./http-vendor-ei4kQ0Q2.js";import"./csvMappings-CudA6gLI.js";const Z=({candidate:s,isEditing:a})=>{var t,r;const[n,i]=l.useState({name:s.name||"",email:s.email||"",phone:s.phone||"",location:s.location||"",currentCompany:s.currentCompany||"",designation:s.designation||"",totalExperience:s.totalExperience||"",lastSalary:s.lastSalary||"",salaryExpectation:s.salaryExpectation||"",qualification:s.qualification||"",industry:s.industry||""}),c=(e,s)=>{i(a=>({...a,[e]:s}))};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(d,{className:"w-5 h-5 mr-2 text-blue-600"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a?e.jsx("input",{type:"text",value:n.name,onChange:e=>c("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsx("p",{className:"text-gray-900",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a?e.jsx("input",{type:"email",value:n.email,onChange:e=>c("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:s.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),a?e.jsx("input",{type:"tel",value:n.phone,onChange:e=>c("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:s.phone})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),a?e.jsx("input",{type:"text",value:n.location,onChange:e=>c("location",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:s.location})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(u,{className:"w-5 h-5 mr-2 text-blue-600"}),"Professional Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Company"}),a?e.jsx("input",{type:"text",value:n.currentCompany,onChange:e=>c("currentCompany",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:s.currentCompany||"Not specified"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),a?e.jsx("input",{type:"text",value:n.designation,onChange:e=>c("designation",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsx("p",{className:"text-gray-900",children:s.designation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Experience"}),a?e.jsx("input",{type:"text",value:n.totalExperience,onChange:e=>c("totalExperience",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsx("p",{className:"text-gray-900",children:s.totalExperience})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Industry"}),a?e.jsx("input",{type:"text",value:n.industry,onChange:e=>c("industry",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsx("p",{className:"text-gray-900",children:s.industry||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Salary"}),a?e.jsx("input",{type:"text",value:n.lastSalary,onChange:e=>c("lastSalary",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:s.lastSalary})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salary Expectation"}),a?e.jsx("input",{type:"text",value:n.salaryExpectation,onChange:e=>c("salaryExpectation",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:s.salaryExpectation})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(y,{className:"w-5 h-5 mr-2 text-blue-600"}),"Education"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Qualification"}),a?e.jsx("input",{type:"text",value:n.qualification,onChange:e=>c("qualification",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsx("p",{className:"text-gray-900",children:s.qualification})]})]}),s.skills&&s.skills.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(b,{className:"w-5 h-5 mr-2 text-blue-600"}),"Skills"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.skills.map((s,a)=>e.jsx("span",{className:"inline-block bg-blue-50 text-blue-700 text-sm px-3 py-1 rounded-full",children:s},a))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"CV Number:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:s.cvNo})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Allocation:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:s.allocation})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Registration Date:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:(null==(t=s.registration)?void 0:t.date)?new Date(s.registration.date).toLocaleDateString():"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Registration Source:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:(null==(r=s.registration)?void 0:r.resource)||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Created By:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:s.createdByName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Last Modified By:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:s.lastModifiedByName||"Not modified"})]})]})]})]})},ee=({candidate:s})=>{var a,t;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2 text-blue-600"}),"Application Overview"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position Applied For"}),e.jsx("p",{className:"text-gray-900",children:s.interestedFor})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Date"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-4 h-4 text-gray-400"}),e.jsx("p",{className:"text-gray-900",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"Not specified"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Stage"}),e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium "+("registration"===s.currentStage?"bg-blue-100 text-blue-800":"resume-sharing"===s.currentStage?"bg-purple-100 text-purple-800":"shortlisting"===s.currentStage?"bg-amber-100 text-amber-800":"lineup-feedback"===s.currentStage?"bg-cyan-100 text-cyan-800":"selection"===s.currentStage?"bg-green-100 text-green-800":"closure"===s.currentStage?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"),children:null==(a=s.currentStage)?void 0:a.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase())})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overall Status"}),e.jsx("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium "+("new"===s.overallStatus?"bg-blue-100 text-blue-800":"in-process"===s.overallStatus?"bg-yellow-100 text-yellow-800":"shortlisted"===s.overallStatus?"bg-purple-100 text-purple-800":"interviewed"===s.overallStatus?"bg-cyan-100 text-cyan-800":"selected"===s.overallStatus?"bg-green-100 text-green-800":"placed"===s.overallStatus?"bg-emerald-100 text-emerald-800":"bg-red-100 text-red-800"),children:null==(t=s.overallStatus)?void 0:t.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase())})]})]})]}),s.resumeSharing&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(N,{className:"w-5 h-5 mr-2 text-purple-600"}),"Resume Sharing"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client"}),e.jsx("p",{className:"text-gray-900",children:s.resumeSharing.shortlistsForClient||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium "+("Done"===s.resumeSharing.resumeShareStatus?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:s.resumeSharing.resumeShareStatus})]}),s.resumeSharing.remark&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remarks"}),e.jsx("p",{className:"text-gray-900",children:s.resumeSharing.remark})]})]})]}),s.shortlisting&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2 text-amber-600"}),"Shortlisting"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shortlist Date"}),e.jsx("p",{className:"text-gray-900",children:s.shortlisting.shortlistDate?new Date(s.shortlisting.shortlistDate).toLocaleDateString():"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client"}),e.jsx("p",{className:"text-gray-900",children:s.shortlisting.shortlistsForClient||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resource"}),e.jsx("p",{className:"text-gray-900",children:s.shortlisting.resource||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium "+("Done"===s.shortlisting.shortlistStatus?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:s.shortlisting.shortlistStatus})]})]})]}),s.lineupFeedback&&s.lineupFeedback.feedbacks&&s.lineupFeedback.feedbacks.length>0&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(v,{className:"w-5 h-5 mr-2 text-cyan-600"}),"Client Feedback"]}),e.jsx("div",{className:"space-y-4",children:s.lineupFeedback.feedbacks.map((s,a)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.clientName}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Feedback #",s.feedbackNumber]})]}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Selected"===s.feedback?"bg-green-100 text-green-800":"Rejected"===s.feedback?"bg-red-100 text-red-800":"Hold"===s.feedback?"bg-yellow-100 text-yellow-800":"Joined"===s.feedback?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"),children:s.feedback})]}),s.scheduledDate&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-2",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:["Scheduled: ",new Date(s.scheduledDate).toLocaleDateString()]})]})]},a))})]}),s.selection&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(w,{className:"w-5 h-5 mr-2 text-green-600"}),"Selection"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client"}),e.jsx("p",{className:"text-gray-900",children:s.selection.client||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selection Date"}),e.jsx("p",{className:"text-gray-900",children:s.selection.selectionDate?new Date(s.selection.selectionDate).toLocaleDateString():"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selection Status"}),e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium "+("Selected"===s.selection.selectionStatus?"bg-green-100 text-green-800":"Rejected"===s.selection.selectionStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:s.selection.selectionStatus||"Pending"})]})]})]}),s.closure&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(b,{className:"w-5 h-5 mr-2 text-emerald-600"}),"Closure"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Placed In"}),e.jsx("p",{className:"text-gray-900",children:s.closure.placedIn||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Joining Date"}),e.jsx("p",{className:"text-gray-900",children:s.closure.joiningDate?new Date(s.closure.joiningDate).toLocaleDateString():"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Offered Salary"}),e.jsx("p",{className:"text-gray-900",children:s.closure.offeredSalary||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agency Charges"}),e.jsx("p",{className:"text-gray-900",children:s.closure.charges||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Joining Status"}),e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium "+("Yes"===s.closure.joiningStatus?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"Yes"===s.closure.joiningStatus?"Joined":"Not Joined"})]})]})]})]})},se=({candidate:a,onDocumentUpload:t,uploadingDocument:l})=>{var r,n,i;const c=a.documents||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(S,{className:"w-5 h-5 mr-2 text-blue-600"}),"Upload Documents"]}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",className:"hidden",onChange:t,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",disabled:l}),e.jsx(s,{variant:"primary",size:"sm",icon:l?e.jsx(k,{className:"w-4 h-4 animate-spin"}):e.jsx(C,{className:"w-4 h-4"}),disabled:l,children:l?"Uploading...":"Add Document"})]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("p",{children:"Supported formats: PDF, DOC, DOCX, JPG, JPEG, PNG"}),e.jsx("p",{children:"Maximum file size: 10MB"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(N,{className:"w-5 h-5 mr-2 text-blue-600"}),"Documents (",c.length,")"]}),0===c.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No documents uploaded yet"}),e.jsx("p",{className:"text-sm",children:"Upload resumes, certificates, and other relevant documents"})]}):e.jsx("div",{className:"space-y-3",children:c.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:[(a.size/1024/1024).toFixed(2)," MB"]}),e.jsxs("span",{children:["Uploaded by ",a.uploadedBy]}),e.jsx("span",{children:new Date(a.uploadedAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{variant:"outline",size:"sm",icon:e.jsx(D,{className:"w-4 h-4"}),children:"Download"}),e.jsx(s,{variant:"outline",size:"sm",icon:e.jsx(A,{className:"w-4 h-4"}),className:"text-red-600 hover:text-red-700",children:"Remove"})]})]},t))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resume Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resume Shared With"}),e.jsx("p",{className:"text-gray-900",children:(null==(r=a.resumeSharing)?void 0:r.shortlistsForClient)||"Not shared yet"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resume Share Status"}),e.jsx("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium "+("Done"===(null==(n=a.resumeSharing)?void 0:n.resumeShareStatus)?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:(null==(i=a.resumeSharing)?void 0:i.resumeShareStatus)||"Pending"})]})]})]})]})},ae=({candidate:a,newNote:t,setNewNote:l,onAddNote:r})=>{const n=a.notes||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(C,{className:"w-5 h-5 mr-2 text-blue-600"}),"Add Note"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("textarea",{value:t,onChange:e=>l(e.target.value),placeholder:"Add a note about this candidate...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:4}),e.jsx("div",{className:"flex justify-end",children:e.jsx(s,{onClick:r,disabled:!t.trim(),variant:"primary",size:"sm",children:"Add Note"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(v,{className:"w-5 h-5 mr-2 text-blue-600"}),"Notes (",n.length,")"]}),0===n.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(v,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No notes added yet"}),e.jsx("p",{className:"text-sm",children:"Add notes to track important information about this candidate"})]}):e.jsx("div",{className:"space-y-4",children:n.map((s,a)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(d,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.createdByName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(s.createdAt).toLocaleDateString()," at ",new Date(s.createdAt).toLocaleTimeString()]})]})]}),s.isPrivate&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Private"})]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.content})]},a))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(k,{className:"w-5 h-5 mr-2 text-blue-600"}),"Recent Activity"]}),a.changeHistory&&a.changeHistory.length>0?e.jsxs("div",{className:"space-y-4",children:[a.changeHistory.slice(0,5).map((s,a)=>e.jsxs("div",{className:"flex items-start space-x-3 pb-4 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(k,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.changedByName}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.timestamp).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:s.changeType.replace("_"," ")}),s.reason&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1 italic",children:["Reason: ",s.reason]})]})]},a)),a.changeHistory.length>5&&e.jsx("div",{className:"text-center",children:e.jsxs(s,{variant:"outline",size:"sm",children:["View All Activity (",a.changeHistory.length,")"]})})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(k,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No activity history available"})]})]})]})},te=({candidate:a,onStageUpdate:t,currentUser:r})=>{var n;const[i,c]=l.useState(!1),d=(null==(n=W[a.currentStage])?void 0:n.order)||0,o=Object.entries(W).filter(([e,s])=>s.order===d+1).map(([e,s])=>({stage:e,config:s}));return 0===o.length?e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(w,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("p",{className:"text-sm",children:"Recruitment process completed"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Advance to Next Stage"}),o.map(({stage:l,config:n})=>e.jsxs(s,{onClick:()=>(async e=>{c(!0);try{const s={currentStage:e,lastModifiedBy:null==r?void 0:r.id,lastModifiedByName:null==r?void 0:r.name},l=new Date;switch(e){case"resume-sharing":s.resumeSharing={...a.resumeSharing,date:l,resumeShareStatus:"Done"};break;case"shortlisting":s.shortlisting={...a.shortlisting,shortlistDate:l,shortlistStatus:"Done"};break;case"lineup-feedback":s.lineupFeedback={...a.lineupFeedback,shortlistDate:l,lineupStatus:"Done"};break;case"selection":s.selection={...a.selection,selectionDate:l,selectionStatus:"Selected"};break;case"closure":s.closure={...a.closure,joiningDate:l}}await t(s)}catch(s){}finally{c(!1)}})(l),disabled:i,className:"w-full justify-between",variant:"outline",children:[e.jsxs("span",{children:["Move to ",n.name]}),e.jsx(B,{className:"w-4 h-4"})]},l))]})},le=({candidate:a,onFeedbackSubmit:t,currentUser:r})=>{const[n,i]=l.useState(!1),[d,o]=l.useState({clientName:"",feedback:"Pending",scheduledDate:"",notes:""}),[m,x]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(s,{onClick:()=>i(!0),icon:e.jsx(v,{className:"w-4 h-4"}),className:"w-full",children:"Add Client Feedback"}),e.jsx(c,{isOpen:n,onClose:()=>i(!1),title:"Add Client Feedback",className:"max-w-md",children:e.jsxs("form",{onSubmit:async e=>{var s;e.preventDefault(),x(!0);try{const e=(null==(s=a.lineupFeedback)?void 0:s.feedbacks)||[],l={feedbackNumber:e.length+1,clientName:d.clientName,feedback:d.feedback,scheduledDate:d.scheduledDate?new Date(d.scheduledDate):void 0,notes:d.notes,createdAt:new Date},n=[...e,l],c={lineupFeedback:{...a.lineupFeedback,feedbacks:n,lineupStatus:"Done"},lastModifiedBy:null==r?void 0:r.id,lastModifiedByName:null==r?void 0:r.name};await t(c),o({clientName:"",feedback:"Pending",scheduledDate:"",notes:""}),i(!1)}catch(l){}finally{x(!1)}},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),e.jsx("input",{type:"text",value:d.clientName,onChange:e=>o(s=>({...s,clientName:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feedback Status *"}),e.jsx("select",{value:d.feedback,onChange:e=>o(s=>({...s,feedback:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[{value:"Selected",label:"Selected",color:"text-green-600"},{value:"Rejected",label:"Rejected",color:"text-red-600"},{value:"Hold",label:"On Hold",color:"text-yellow-600"},{value:"Joined",label:"Joined",color:"text-emerald-600"},{value:"Pending",label:"Pending",color:"text-gray-600"}].map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scheduled Date"}),e.jsx("input",{type:"datetime-local",value:d.scheduledDate,onChange:e=>o(s=>({...s,scheduledDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:d.notes,onChange:e=>o(s=>({...s,notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional notes about the feedback..."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(s,{type:"button",variant:"outline",onClick:()=>i(!1),className:"flex-1",children:"Cancel"}),e.jsx(s,{type:"submit",disabled:m,className:"flex-1",children:m?"Saving...":"Save Feedback"})]})]})})]})},re=({candidate:a,onInterviewSchedule:t,currentUser:r})=>{const[n,i]=l.useState(!1),[d,o]=l.useState({type:"video",scheduledDate:"",duration:60,interviewer:"",interviewerEmail:"",meetingLink:"",location:"",notes:""}),[u,g]=l.useState(!1),h=[{value:"phone",label:"Phone Interview",icon:m},{value:"video",label:"Video Interview",icon:I},{value:"in-person",label:"In-Person Interview",icon:x}];return e.jsxs(e.Fragment,{children:[e.jsx(s,{onClick:()=>i(!0),icon:e.jsx(f,{className:"w-4 h-4"}),className:"w-full",variant:"outline",children:"Schedule Interview"}),e.jsx(c,{isOpen:n,onClose:()=>i(!1),title:"Schedule Interview",className:"max-w-lg",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),g(!0);try{const e={id:`interview_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,candidateId:a.id,type:d.type,scheduledDate:new Date(d.scheduledDate),duration:parseInt(d.duration),interviewer:{id:(null==r?void 0:r.id)||"current-user",name:d.interviewer||(null==r?void 0:r.name)||"Current User",email:d.interviewerEmail||(null==r?void 0:r.email)||""},status:"scheduled",meetingLink:d.meetingLink,location:d.location,notes:d.notes,createdAt:new Date};await t(e),o({type:"video",scheduledDate:"",duration:60,interviewer:"",interviewerEmail:"",meetingLink:"",location:"",notes:""}),i(!1)}catch(s){}finally{g(!1)}},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interview Type *"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.map(s=>{const a=s.icon;return e.jsxs("button",{type:"button",onClick:()=>o(e=>({...e,type:s.value})),className:"p-3 border rounded-lg text-center transition-colors "+(d.type===s.value?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[e.jsx(a,{className:"w-5 h-5 mx-auto mb-1"}),e.jsx("span",{className:"text-xs",children:s.label})]},s.value)})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time *"}),e.jsx("input",{type:"datetime-local",value:d.scheduledDate,onChange:e=>o(s=>({...s,scheduledDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),e.jsxs("select",{value:d.duration,onChange:e=>o(s=>({...s,duration:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:45,children:"45 minutes"}),e.jsx("option",{value:60,children:"1 hour"}),e.jsx("option",{value:90,children:"1.5 hours"}),e.jsx("option",{value:120,children:"2 hours"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interviewer Name"}),e.jsx("input",{type:"text",value:d.interviewer,onChange:e=>o(s=>({...s,interviewer:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:(null==r?void 0:r.name)||"Enter interviewer name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interviewer Email"}),e.jsx("input",{type:"email",value:d.interviewerEmail,onChange:e=>o(s=>({...s,interviewerEmail:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:(null==r?void 0:r.email)||"Enter email"})]})]}),"video"===d.type&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meeting Link"}),e.jsx("input",{type:"url",value:d.meetingLink,onChange:e=>o(s=>({...s,meetingLink:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://zoom.us/j/... or Teams link"})]}),"in-person"===d.type&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:d.location,onChange:e=>o(s=>({...s,location:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Office address or meeting room"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:d.notes,onChange:e=>o(s=>({...s,notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Interview agenda, preparation notes, etc."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(s,{type:"button",variant:"outline",onClick:()=>i(!1),className:"flex-1",children:"Cancel"}),e.jsx(s,{type:"submit",disabled:u,className:"flex-1",children:u?"Scheduling...":"Schedule Interview"})]})]})})]})},ne=({candidate:a,onPlacementUpdate:t,currentUser:r})=>{var n,i,d,o,m;const[x,u]=l.useState(!1),[h,p]=l.useState({placedIn:(null==(n=a.closure)?void 0:n.placedIn)||"",joiningDate:(null==(i=a.closure)?void 0:i.joiningDate)?new Date(a.closure.joiningDate).toISOString().split("T")[0]:"",offeredSalary:(null==(d=a.closure)?void 0:d.offeredSalary)||"",charges:(null==(o=a.closure)?void 0:o.charges)||"",joiningStatus:(null==(m=a.closure)?void 0:m.joiningStatus)||"No",notes:""}),[y,b]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(s,{onClick:()=>u(!0),icon:e.jsx(g,{className:"w-4 h-4"}),className:"w-full",variant:"outline",children:"Update Placement Details"}),e.jsx(c,{isOpen:x,onClose:()=>u(!1),title:"Placement Details",className:"max-w-lg",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),b(!0);try{const e={closure:{...a.closure,placedIn:h.placedIn,joiningDate:h.joiningDate?new Date(h.joiningDate):void 0,offeredSalary:h.offeredSalary,charges:h.charges,joiningStatus:h.joiningStatus},currentStage:"Yes"===h.joiningStatus?"completed":"closure",overallStatus:"Yes"===h.joiningStatus?"placed":"selected",lastModifiedBy:null==r?void 0:r.id,lastModifiedByName:null==r?void 0:r.name};await t(e),u(!1)}catch(s){}finally{b(!1)}},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Placed In *"}),e.jsx("input",{type:"text",value:h.placedIn,onChange:e=>p(s=>({...s,placedIn:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Company name",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Joining Date"}),e.jsx("input",{type:"date",value:h.joiningDate,onChange:e=>p(s=>({...s,joiningDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Joining Status *"}),e.jsxs("select",{value:h.joiningStatus,onChange:e=>p(s=>({...s,joiningStatus:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"No",children:"Not Joined"}),e.jsx("option",{value:"Yes",children:"Joined"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Offered Salary"}),e.jsx("input",{type:"text",value:h.offeredSalary,onChange:e=>p(s=>({...s,offeredSalary:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 50K, 8 LPA"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Agency Charges"}),e.jsx("input",{type:"text",value:h.charges,onChange:e=>p(s=>({...s,charges:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 10K, 15%"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:h.notes,onChange:e=>p(s=>({...s,notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Additional placement details, terms, etc."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx(s,{type:"button",variant:"outline",onClick:()=>u(!1),className:"flex-1",children:"Cancel"}),e.jsx(s,{type:"submit",disabled:y,className:"flex-1",children:y?"Saving...":"Save Details"})]})]})})]})},ie=({candidate:s,onCandidateUpdate:a,onInterviewSchedule:t,currentUser:l})=>{var r,n,i;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx(k,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Workflow Management"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border-b border-gray-100 pb-6",children:e.jsx(te,{candidate:s,onStageUpdate:async e=>{await a(s.id,e)},currentUser:l})}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(le,{candidate:s,onFeedbackSubmit:async e=>{await a(s.id,e)},currentUser:l}),e.jsx(re,{candidate:s,onInterviewSchedule:t,currentUser:l}),e.jsx(ne,{candidate:s,onPlacementUpdate:async e=>{await a(s.id,e)},currentUser:l})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Current Stage"}),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Completed"===(null==(r=W[s.currentStage])?void 0:r.name)?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:(null==(n=W[s.currentStage])?void 0:n.name)||"Unknown"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:(null==(i=W[s.currentStage])?void 0:i.description)||"Stage description not available"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[X.getCandidateProgress(s),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${X.getCandidateProgress(s)}%`}})})]})]})]})]})},ce=({candidateId:e,changedBy:s,changedByName:a,changeType:t,changes:l=[],reason:r="",metadata:n={}})=>({id:ue(),candidateId:e,changedBy:s,changedByName:a,changeType:t,changes:l,timestamp:(new Date).toISOString(),reason:r,ipAddress:n.ipAddress||"unknown",userAgent:n.userAgent||navigator.userAgent,sessionId:n.sessionId||ge()}),de=e=>e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim(),oe=e=>null==e?"Empty":"boolean"==typeof e?e?"Yes":"No":"object"==typeof e?Array.isArray(e)?e.length>0?e.join(", "):"Empty":JSON.stringify(e):"string"==typeof e&&e.length>100?e.substring(0,100)+"...":String(e),me=e=>{if(!e)return"Empty";const s=String(e);if(s.includes("@")){const[e,a]=s.split("@");return`${e.substring(0,2)}***@${a}`}return/^\+?\d{10,}$/.test(s.replace(/[\s-()]/g,""))?`***${s.slice(-4)}`:"***"},xe=(e,s,a)=>s&&"Empty"!==s?a&&"Empty"!==a?`${e} changed from "${oe(s)}" to "${oe(a)}"`:`${e} was cleared (was "${oe(s)}")`:`${e} was set to "${oe(a)}"`,ue=()=>`change_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ge=()=>{const e=sessionStorage.getItem("audit_session_id");if(e)return e;const s=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return sessionStorage.setItem("audit_session_id",s),s},he={name:{displayName:"Full Name",sensitive:!1},email:{displayName:"Email Address",sensitive:!0},phone:{displayName:"Phone Number",sensitive:!0},location:{displayName:"Location",sensitive:!1},designation:{displayName:"Current Designation",sensitive:!1},currentCompany:{displayName:"Current Company",sensitive:!1},industry:{displayName:"Industry",sensitive:!1},totalExperience:{displayName:"Total Experience",sensitive:!1},qualification:{displayName:"Qualification",sensitive:!1},lastSalary:{displayName:"Last Salary",sensitive:!0},salaryExpectation:{displayName:"Salary Expectation",sensitive:!0},interestedFor:{displayName:"Position Interested For",sensitive:!1},allocation:{displayName:"Sheet Allocation",sensitive:!1},currentStage:{displayName:"Current Stage",sensitive:!1},overallStatus:{displayName:"Overall Status",sensitive:!1},createdBy:{displayName:"Created By",sensitive:!1},createdByName:{displayName:"Created By Name",sensitive:!1},lastModifiedBy:{displayName:"Last Modified By",sensitive:!1},lastModifiedByName:{displayName:"Last Modified By Name",sensitive:!1}};const pe=new class{constructor(){this.storageKey="candidate_change_history",this.retentionPeriodDays=2555,this.encryptionEnabled=!0}async trackChange(e,s,a,t,l="updated",r=""){try{const n=((e,s,a={})=>{const t=[];return new Set([...Object.keys(e||{}),...Object.keys(s||{})]).forEach(l=>{var r,n;const i=null==e?void 0:e[l],c=null==s?void 0:s[l];if(JSON.stringify(i)===JSON.stringify(c))return;if(l.startsWith("_")||"changeHistory"===l||"updatedAt"===l)return;const d=(null==(r=a[l])?void 0:r.displayName)||de(l),o=(null==(n=a[l])?void 0:n.sensitive)||!1;t.push({field:l,fieldDisplayName:d,oldValue:o?me(i):oe(i),newValue:o?me(c):oe(c),changeDescription:xe(d,i,c),isSensitive:o})}),t})(s,a,he);if(0===n.length&&"updated"===l)return null;const i=ce({candidateId:e,changedBy:t.id,changedByName:t.name,changeType:l,changes:n,reason:r,metadata:{ipAddress:await this.getClientIP(),userAgent:navigator.userAgent,sessionId:this.getSessionId()}}),c=(e=>{const s=[];return e.candidateId||s.push("Candidate ID is required"),e.changedBy||s.push("Changed by user ID is required"),e.changedByName||s.push("Changed by user name is required"),e.changeType||s.push("Change type is required"),e.timestamp||s.push("Timestamp is required"),{isValid:0===s.length,errors:s}})(i);return c.isValid?(await this.saveChangeEntry(e,i),i):null}catch(n){return null}}async saveChangeEntry(e,s){try{const a=await this.getChangeHistory(e);a.push(s);const t=this.applyRetentionPolicy(a),l=this.encryptionEnabled?this.encryptData(t):t;return localStorage.setItem(`${this.storageKey}_${e}`,JSON.stringify(l)),!0}catch(a){return!1}}async getChangeHistory(e,s={}){try{const a=localStorage.getItem(`${this.storageKey}_${e}`);if(!a)return[];const t=JSON.parse(a),l=this.encryptionEnabled?this.decryptData(t):t;return Object.keys(s).length>0?this.filterHistory(l,s):l.sort((e,s)=>new Date(s.timestamp)-new Date(e.timestamp))}catch(a){return[]}}filterHistory(e,s){return e.filter(e=>(!s.changeType||"all"===s.changeType||e.changeType===s.changeType)&&((!s.userId||e.changedBy===s.userId)&&(!(s.startDate&&new Date(e.timestamp)<new Date(s.startDate))&&!(s.endDate&&new Date(e.timestamp)>new Date(s.endDate)))))}applyRetentionPolicy(e){const s=new Date;return s.setDate(s.getDate()-this.retentionPeriodDays),e.filter(e=>new Date(e.timestamp)>=s)}async exportChangeHistory(e,s="json"){try{const a=await this.getChangeHistory(e);return"json"===s?JSON.stringify(a,null,2):"csv"===s?this.convertToCSV(a):null}catch(a){return null}}convertToCSV(e){const s=e.flatMap(e=>e.changes.length>0?e.changes.map(s=>[new Date(e.timestamp).toLocaleString(),e.changeType,e.changedByName,s.fieldDisplayName,s.oldValue,s.newValue,e.reason||""]):[[new Date(e.timestamp).toLocaleString(),e.changeType,e.changedByName,"","","",e.reason||""]]);return[["Timestamp","Change Type","Changed By","Field","Old Value","New Value","Reason"].join(","),...s.map(e=>e.map(e=>`"${String(e).replace(/"/g,'""')}"`).join(","))].join("\n")}async deleteChangeHistory(e,s=""){try{const a=ce({candidateId:e,changedBy:"system",changedByName:"System",changeType:"history_deleted",changes:[],reason:`Change history deleted: ${s}`,metadata:{}});return await this.saveDeletionRecord(e,a),localStorage.removeItem(`${this.storageKey}_${e}`),!0}catch(a){return!1}}async saveDeletionRecord(e,s){try{const e=JSON.parse(localStorage.getItem("deletion_log")||"[]");e.push(s),localStorage.setItem("deletion_log",JSON.stringify(e))}catch(a){}}async anonymizeChangeHistory(e){try{const s=(await this.getChangeHistory(e)).map(e=>({...e,changedBy:"anonymized",changedByName:"Anonymized User",ipAddress:"anonymized",userAgent:"anonymized",changes:e.changes.map(e=>({...e,oldValue:e.isSensitive?"***":e.oldValue,newValue:e.isSensitive?"***":e.newValue}))}));return localStorage.setItem(`${this.storageKey}_${e}`,JSON.stringify(s)),!0}catch(s){return!1}}async getClientIP(){try{return"demo-ip-address"}catch(e){return"unknown"}}getSessionId(){let e=sessionStorage.getItem("audit_session_id");return e||(e=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("audit_session_id",e)),e}encryptData(e){return btoa(JSON.stringify(e))}decryptData(e){try{return JSON.parse(atob(e))}catch(s){return e}}async generateAuditReport(e,s,a){try{const t=await this.getChangeHistory(e,{startDate:s,endDate:a}),l={candidateId:e,reportGeneratedAt:(new Date).toISOString(),period:{startDate:s,endDate:a},totalChanges:t.length,changesByType:{},changesByUser:{},timeline:t.map(e=>({timestamp:e.timestamp,type:e.changeType,user:e.changedByName,changesCount:e.changes.length}))};return t.forEach(e=>{l.changesByType[e.changeType]=(l.changesByType[e.changeType]||0)+1,l.changesByUser[e.changedByName]=(l.changesByUser[e.changedByName]||0)+1}),l}catch(t){return null}}async logDataAccess(e,s,a,t="view"){try{const l=ce({candidateId:e,changedBy:s,changedByName:a,changeType:"data_accessed",changes:[{field:"access_type",fieldDisplayName:"Access Type",oldValue:"",newValue:t,changeDescription:`Data accessed: ${t}`}],reason:"User accessed candidate data",metadata:{ipAddress:await this.getClientIP(),userAgent:navigator.userAgent,sessionId:this.getSessionId()}});return await this.saveChangeEntry(e,l),!0}catch(l){return!1}}},ye=({candidate:s,onLoadMore:a,showFilters:t=!0,showStatistics:r=!0,maxItems:n=50,groupByDate:i=!0,onFilterByUser:c,onFilterByType:d})=>{const[o,m]=l.useState(new Set),[x,u]=l.useState({changeType:"all",dateRange:{start:"",end:""},changedBy:"all"}),[g,h]=l.useState(!1);if(!(null==s?void 0:s.changeHistory))return e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(T,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{children:"No change history available"}),e.jsx("p",{className:"text-sm mt-2",children:"Changes will appear here once modifications are made"})]})});const y=s=>{const a={created:_,updated:$,status_changed:L,stage_changed:L,note_added:v,document_uploaded:S,interview_scheduled:f,merged:P,imported:N,data_accessed:F}[s]||$;return e.jsx(a,{className:"w-4 h-4"})},b=l.useMemo(()=>s.changeHistory.filter(e=>("all"===x.changeType||e.changeType===x.changeType)&&(!(x.dateRange.start&&new Date(e.timestamp)<new Date(x.dateRange.start))&&(!(x.dateRange.end&&new Date(e.timestamp)>new Date(x.dateRange.end))&&("all"===x.changedBy||e.changedBy===x.changedBy)))).sort((e,s)=>new Date(s.timestamp)-new Date(e.timestamp)).slice(0,n),[s.changeHistory,x,n]),j=l.useMemo(()=>{if(!i)return{"All Changes":b};const e={};return b.forEach(s=>{const a=new Date(s.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});e[a]||(e[a]=[]),e[a].push(s)}),e},[b,i]),w=l.useMemo(()=>(e=>{const s={totalChanges:e.length,changesByType:{},changesByUser:{},mostChangedFields:{},recentActivity:[]};return e.forEach(e=>{s.changesByType[e.changeType]=(s.changesByType[e.changeType]||0)+1,s.changesByUser[e.changedByName]=(s.changesByUser[e.changedByName]||0)+1,e.changes.forEach(e=>{s.mostChangedFields[e.field]=(s.mostChangedFields[e.field]||0)+1})}),s.recentActivity=e.sort((e,s)=>new Date(s.timestamp)-new Date(e.timestamp)).slice(0,10),s})(s.changeHistory),[s.changeHistory]),C=l.useMemo(()=>[...new Set(s.changeHistory.map(e=>({id:e.changedBy,name:e.changedByName})))],[s.changeHistory]),A=async e=>{try{const a=await pe.exportChangeHistory(s.id,e);if(a){const t=new Blob([a],{type:"json"===e?"application/json":"text/csv"}),l=URL.createObjectURL(t),r=document.createElement("a");r.href=l,r.download=`change-history-${s.id}-${Date.now()}.${e}`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(l)}h(!1)}catch(a){}},I=e=>{const s=new Date,a=new Date(e),t=s-a,l=Math.floor(t/6e4),r=Math.floor(t/36e5),n=Math.floor(t/864e5);return l<1?"Just now":l<60?`${l} minute${l>1?"s":""} ago`:r<24?`${r} hour${r>1?"s":""} ago`:n<7?`${n} day${n>1?"s":""} ago`:a.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},M=e=>{switch(e.changeType){case"created":return`Candidate profile created by ${e.changedByName}`;case"updated":return`${e.changes.length} field(s) updated`;case"status_changed":const s=e.changes.find(e=>"overallStatus"===e.field);return s?`Status changed from "${s.oldValue}" to "${s.newValue}"`:"Status updated";case"stage_changed":const a=e.changes.find(e=>"currentStage"===e.field);return a?`Stage changed from "${a.oldValue}" to "${a.newValue}"`:"Stage updated";case"note_added":return"New note added to candidate profile";case"document_uploaded":return"Document uploaded to candidate profile";case"interview_scheduled":return"Interview scheduled for candidate";case"merged":return"Candidate merged with duplicate record";case"imported":return"Candidate imported from external source";case"data_accessed":return"Candidate data accessed";default:return`Action performed: ${e.changeType}`}};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(T,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Change History & Audit Trail"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Complete audit trail of all modifications (",b.length," entries)"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>h(!g),className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]}),g&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:[e.jsx("button",{onClick:()=>A("json"),className:"w-full text-left px-4 py-2 hover:bg-gray-50 rounded-t-lg",children:"Export as JSON"}),e.jsx("button",{onClick:()=>A("csv"),className:"w-full text-left px-4 py-2 hover:bg-gray-50 rounded-b-lg",children:"Export as CSV"})]})]})]}),r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total Changes"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:w.totalChanges})]}),e.jsx(p,{className:"w-8 h-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:Object.keys(w.changesByUser).length})]}),e.jsx(P,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Change Types"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:Object.keys(w.changesByType).length})]}),e.jsx(E,{className:"w-8 h-8 text-purple-400"})]})}),e.jsx("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-amber-600 font-medium",children:"Last Activity"}),e.jsx("p",{className:"text-sm font-bold text-amber-900",children:w.recentActivity[0]?I(w.recentActivity[0].timestamp):"No activity"})]}),e.jsx(k,{className:"w-8 h-8 text-amber-400"})]})})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Change Type"}),e.jsxs("select",{value:x.changeType,onChange:e=>{u(s=>({...s,changeType:e.target.value})),d&&d(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"created",children:"Created"}),e.jsx("option",{value:"updated",children:"Updated"}),e.jsx("option",{value:"status_changed",children:"Status Changed"}),e.jsx("option",{value:"stage_changed",children:"Stage Changed"}),e.jsx("option",{value:"note_added",children:"Note Added"}),e.jsx("option",{value:"document_uploaded",children:"Document Uploaded"}),e.jsx("option",{value:"interview_scheduled",children:"Interview Scheduled"}),e.jsx("option",{value:"merged",children:"Merged"}),e.jsx("option",{value:"imported",children:"Imported"}),e.jsx("option",{value:"data_accessed",children:"Data Accessed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Changed By"}),e.jsxs("select",{value:x.changedBy,onChange:e=>{u(s=>({...s,changedBy:e.target.value})),c&&c(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Users"}),C.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date From"}),e.jsx("input",{type:"date",value:x.dateRange.start,onChange:e=>u(s=>({...s,dateRange:{...s.dateRange,start:e.target.value}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"p-6",children:[0===b.length?e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(T,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{children:"No changes match the current filters"})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(j).map(([s,a])=>e.jsxs("div",{children:[i&&e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200"}),e.jsx("span",{className:"px-4 text-sm font-medium text-gray-600",children:s}),e.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),e.jsx("div",{className:"space-y-4",children:a.map((s,t)=>{return e.jsxs("div",{className:"relative",children:[t<a.length-1&&e.jsx("div",{className:"absolute left-6 top-12 w-0.5 h-full bg-gray-200"}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full border-2 flex items-center justify-center ${l=s.changeType,{created:"text-green-600 bg-green-50 border-green-200",updated:"text-blue-600 bg-blue-50 border-blue-200",status_changed:"text-purple-600 bg-purple-50 border-purple-200",stage_changed:"text-indigo-600 bg-indigo-50 border-indigo-200",note_added:"text-amber-600 bg-amber-50 border-amber-200",document_uploaded:"text-cyan-600 bg-cyan-50 border-cyan-200",interview_scheduled:"text-pink-600 bg-pink-50 border-pink-200",merged:"text-red-600 bg-red-50 border-red-200",imported:"text-gray-600 bg-gray-50 border-gray-200",data_accessed:"text-teal-600 bg-teal-50 border-teal-200"}[l]||"text-gray-600 bg-gray-50 border-gray-200"}`,children:y(s.changeType)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.changeType.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}),e.jsxs("span",{className:"text-sm text-gray-500",children:["by ",s.changedByName]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:I(s.timestamp)}),s.changes.length>0&&e.jsx("button",{onClick:()=>(e=>{const s=new Set(o);s.has(e)?s.delete(e):s.add(e),m(s)})(s.id),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center space-x-1",children:o.has(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:"Hide"})]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:"Details"})]})})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:M(s)}),s.reason&&e.jsxs("p",{className:"text-sm text-gray-600 italic",children:["Reason: ",s.reason]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsxs("span",{children:["IP: ",s.ipAddress||"N/A"]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(k,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(s.timestamp).toLocaleString()})]})]}),o.has(s.id)&&s.changes.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Field Changes:"}),e.jsx("div",{className:"space-y-2",children:s.changes.map((s,a)=>e.jsxs("div",{className:"bg-white rounded p-3 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.fieldDisplayName}),s.isSensitive&&e.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-1 rounded",children:"Sensitive"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Before:"}),e.jsx("span",{className:"ml-2 text-red-600",children:s.oldValue||e.jsx("em",{children:"Empty"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"After:"}),e.jsx("span",{className:"ml-2 text-green-600",children:s.newValue||e.jsx("em",{children:"Empty"})})]})]})})]},a))})]})]})})]})]},s.id);var l})})]},s))}),s.changeHistory.length>n&&a&&e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-blue-600 hover:text-blue-800 font-medium rounded-lg border border-blue-200 hover:bg-blue-50 transition-colors",children:"Load More History"})})]})]})},be=({candidate:s,onUpdate:a})=>{const[t,r]=l.useState("consent"),[n,i]=l.useState(null),[c,d]=l.useState(!1),[o]=l.useState([{id:"1",candidateId:s.id,consentType:"data-processing",granted:!0,grantedAt:new Date("2024-01-15"),source:"web-form"},{id:"2",candidateId:s.id,consentType:"marketing",granted:!1,grantedAt:new Date("2024-01-15"),revokedAt:new Date("2024-02-20"),source:"email"},{id:"3",candidateId:s.id,consentType:"third-party-sharing",granted:!0,grantedAt:new Date("2024-01-15"),source:"web-form"}]),[m]=l.useState([{id:"1",candidateId:s.id,type:"access",status:"completed",requestedAt:new Date("2024-03-01"),processedAt:new Date("2024-03-02"),processedBy:"Admin User"}]),x=s=>{const a={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${a[s]||a.pending}`,children:s.charAt(0).toUpperCase()+s.slice(1)})};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(U,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Data Privacy & Compliance"}),e.jsx("p",{className:"text-sm text-gray-600",children:"GDPR/CCPA compliance tools and consent management"})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex space-x-1 p-2",children:[e.jsx("button",{onClick:()=>r("consent"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("consent"===t?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"),children:"Consent Records"}),e.jsx("button",{onClick:()=>r("requests"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("requests"===t?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"),children:"Data Requests"}),e.jsx("button",{onClick:()=>r("actions"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("actions"===t?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"),children:"Privacy Actions"})]})}),e.jsxs("div",{className:"p-6",children:["consent"===t&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(M,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Consent Management"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Track and manage candidate consent for data processing, marketing, and third-party sharing"})]})]})}),o.map(s=>{return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[(a=s.granted,a?e.jsx(w,{className:"w-5 h-5 text-green-600"}):e.jsx(H,{className:"w-5 h-5 text-red-600"})),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.consentType.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Source: ",s.source]})]})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+(s.granted?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.granted?"Granted":"Revoked"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Granted:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:new Date(s.grantedAt).toLocaleDateString()})]}),s.revokedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Revoked:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:new Date(s.revokedAt).toLocaleDateString()})]})]})]},s.id);var a})]}),"requests"===t&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(N,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Data Subject Requests"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Handle GDPR/CCPA data access, portability, deletion, and rectification requests"})]})]})}),0===m.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(N,{className:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e.jsx("p",{children:"No data requests on record"})]}):m.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:[s.type.charAt(0).toUpperCase()+s.type.slice(1)," Request"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Requested: ",new Date(s.requestedAt).toLocaleDateString()]})]}),x(s.status)]}),s.processedAt&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Processed:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:new Date(s.processedAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"By:"}),e.jsx("span",{className:"ml-2 text-gray-900",children:s.processedBy})]})]})]},s.id))]}),"actions"===t&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(O,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-amber-900",children:"Privacy Actions"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Execute privacy-related actions including data export, anonymization, and deletion"})]})]})}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Export Personal Data"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Download all candidate data in JSON format (GDPR Article 20 - Right to Data Portability)"})]})]}),e.jsx("button",{onClick:async()=>{d(!0);try{const e=await pe.exportChangeHistory(s.id,"json");if(e){const a=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download=`candidate-data-${s.id}-${Date.now()}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t)}}catch(e){}finally{d(!1)}},disabled:c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:c?"Exporting...":"Export Data"})]})}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(H,{className:"w-5 h-5 text-purple-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Anonymize Change History"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Remove personally identifiable information from change history while preserving audit trail"})]})]}),e.jsx("button",{onClick:()=>i("anonymize"),disabled:c,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:"Anonymize"})]})}),e.jsx("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(V,{className:"w-5 h-5 text-red-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900",children:"Delete Change History"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Permanently delete all change history (GDPR Article 17 - Right to Erasure). This action cannot be undone."})]})]}),e.jsx("button",{onClick:()=>i("delete"),disabled:c,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:"Delete"})]})})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(M,{className:"w-6 h-6 text-amber-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Action"})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:"anonymize"===n?"Are you sure you want to anonymize the change history? This will remove all personally identifiable information.":"Are you sure you want to delete the change history? This action cannot be undone and will permanently remove all audit trail data."}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>i(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),e.jsx("button",{onClick:"anonymize"===n?async()=>{d(!0);try{await pe.anonymizeChangeHistory(s.id),i(null),a&&a()}catch(e){}finally{d(!1)}}:async()=>{d(!0);try{await pe.deleteChangeHistory(s.id,"User requested data deletion under GDPR/CCPA"),i(null),a&&a()}catch(e){}finally{d(!1)}},disabled:c,className:"flex-1 px-4 py-2 text-white rounded-lg font-medium transition-colors disabled:opacity-50 "+("anonymize"===n?"bg-purple-600 hover:bg-purple-700":"bg-red-600 hover:bg-red-700"),children:c?"Processing...":"Confirm"})]})]})})]})},je=e=>({registration:{label:"Registration",color:"bg-blue-100 text-blue-800",progress:1,icon:d},"resume-sharing":{label:"Resume Sharing",color:"bg-purple-100 text-purple-800",progress:2,icon:N},shortlisting:{label:"Shortlisting",color:"bg-amber-100 text-amber-800",progress:3,icon:j},"lineup-feedback":{label:"Lineup & Feedback",color:"bg-cyan-100 text-cyan-800",progress:4,icon:v},selection:{label:"Selection",color:"bg-green-100 text-green-800",progress:5,icon:w},closure:{label:"Closure",color:"bg-emerald-100 text-emerald-800",progress:6,icon:b},completed:{label:"Completed",color:"bg-gray-100 text-gray-800",progress:7,icon:w}}[e]||{label:"Unknown",color:"bg-gray-100 text-gray-800",progress:0,icon:q}),fe=e=>({new:{label:"New",color:"bg-blue-100 text-blue-800"},"in-process":{label:"In Process",color:"bg-yellow-100 text-yellow-800"},shortlisted:{label:"Shortlisted",color:"bg-purple-100 text-purple-800"},interviewed:{label:"Interviewed",color:"bg-cyan-100 text-cyan-800"},selected:{label:"Selected",color:"bg-green-100 text-green-800"},placed:{label:"Placed",color:"bg-emerald-100 text-emerald-800"},rejected:{label:"Rejected",color:"bg-red-100 text-red-800"}}[e]||{label:"Unknown",color:"bg-gray-100 text-gray-800"}),Ne=({candidate:s})=>{const a=["registration","resume-sharing","shortlisting","lineup-feedback","selection","closure","completed"],t=a.indexOf(s.currentStage);return e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recruitment Progress"}),e.jsx("div",{className:"flex items-center justify-between",children:a.map((s,l)=>{const r=je(s),n=r.icon,i=l<t,c=l===t;return e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:`\n                w-12 h-12 rounded-full flex items-center justify-center mb-2 transition-all duration-300\n                ${i?"bg-green-500 text-white":c?"bg-blue-500 text-white animate-pulse":"bg-gray-200 text-gray-400"}\n              `,children:e.jsx(n,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs font-medium text-center px-2 "+(c?"text-blue-600":i?"text-green-600":"text-gray-400"),children:r.label}),l<a.length-1&&e.jsx("div",{className:`\n                  absolute h-0.5 w-full mt-6 -z-10\n                  ${i?"bg-green-500":"bg-gray-200"}\n                `,style:{left:"50%",width:"calc(100% - 48px)"}})]},s)})})]})},ve=({isOpen:r,onClose:n,candidateId:i,onStatusUpdate:g,onAddNote:h,currentUser:p})=>{const[y,b]=l.useState(null),[j,f]=l.useState(!1),[w,S]=l.useState(null),[C,D]=l.useState("profile"),[A,B]=l.useState(!1),[I,T]=l.useState(""),[E,R]=l.useState(!1);l.useEffect(()=>{r&&i&&U()},[r,i]);const U=async()=>{try{f(!0),S(null);const e=await a.getById(i);e.success?b(e.data):S(e.message||"Failed to load candidate details")}catch(e){S("Failed to load candidate details")}finally{f(!1)}},L=async(e,s)=>{try{(await a.update(e,s)).success&&(b(e=>({...e,...s})),await U())}catch(t){}};if(!r)return null;const _=[{id:"profile",label:"Profile",icon:d},{id:"application",label:"Application",icon:u},{id:"workflow",label:"Workflow",icon:k},{id:"documents",label:"Documents",icon:N},{id:"notes",label:"Notes",icon:v},{id:"history",label:"Change History",icon:k},{id:"privacy",label:"Privacy",icon:F}];return e.jsx(c,{isOpen:r,onClose:n,title:y?`${y.name} - Candidate Details`:"Loading...",className:"max-w-6xl",children:j?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading candidate details..."})]}):w?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(q,{className:"w-12 h-12 mx-auto mb-3 text-red-500"}),e.jsx("p",{className:"text-red-600 mb-4",children:w}),e.jsx(s,{onClick:U,variant:"outline",children:"Try Again"})]}):y?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-6 pb-6 border-b border-gray-200",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:e.jsx("span",{className:"text-3xl font-bold text-white",children:y.name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.name}),e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:y.interestedFor||y.designation}),e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${fe(y.overallStatus).color}`,children:fe(y.overallStatus).label}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${je(y.currentStage).color}`,children:je(y.currentStage).label}),y.rating&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(z,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm text-gray-600",children:y.rating})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"w-4 h-4"}),e.jsx("span",{children:y.email})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:y.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{children:y.location})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsxs("span",{children:["Added by ",y.createdByName]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{variant:"outline",size:"sm",icon:e.jsx($,{className:"w-4 h-4"}),onClick:()=>B(!A),children:A?"Cancel":"Edit"}),e.jsxs("select",{value:y.overallStatus,onChange:e=>(async e=>{try{(await a.update(i,{overallStatus:e,lastModifiedBy:null==p?void 0:p.id,lastModifiedByName:null==p?void 0:p.name})).success&&(b(s=>({...s,overallStatus:e})),null==g||g(e))}catch(s){}})(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in-process",children:"In Process"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interviewed",children:"Interviewed"}),e.jsx("option",{value:"selected",children:"Selected"}),e.jsx("option",{value:"placed",children:"Placed"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})})]}),e.jsx(Ne,{candidate:y}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8",children:_.map(s=>{const a=s.icon;return e.jsxs("button",{onClick:()=>D(s.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(C===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{children:s.label})]},s.id)})})}),e.jsxs("div",{className:"min-h-[400px]",children:["profile"===C&&e.jsx(Z,{candidate:y,isEditing:A}),"application"===C&&e.jsx(ee,{candidate:y}),"workflow"===C&&e.jsx(ie,{candidate:y,onCandidateUpdate:L,onInterviewSchedule:async e=>{try{if((await t.create(e)).success){const e={lastModifiedBy:null==p?void 0:p.id,lastModifiedByName:null==p?void 0:p.name};await L(i,e)}}catch(s){}},currentUser:p}),"documents"===C&&e.jsx(se,{candidate:y,onDocumentUpload:async e=>{const s=e.target.files[0];if(s)try{R(!0),await new Promise(e=>setTimeout(e,1e3));const e={id:Date.now().toString(),name:s.name,type:s.type,size:s.size,uploadedAt:(new Date).toISOString(),uploadedBy:(null==p?void 0:p.name)||"Current User"},t=[...y.documents||[],e];(await a.update(i,{documents:t,lastModifiedBy:null==p?void 0:p.id,lastModifiedByName:null==p?void 0:p.name})).success&&b(e=>({...e,documents:t}))}catch(t){}finally{R(!1)}},uploadingDocument:E}),"notes"===C&&e.jsx(ae,{candidate:y,newNote:I,setNewNote:T,onAddNote:async()=>{if(I.trim())try{const e={content:I,createdBy:(null==p?void 0:p.id)||"current-user",createdByName:(null==p?void 0:p.name)||"Current User",createdAt:(new Date).toISOString(),isPrivate:!1},s=[...y.notes||[],e];(await a.update(i,{notes:s,lastModifiedBy:null==p?void 0:p.id,lastModifiedByName:null==p?void 0:p.name})).success&&(b(e=>({...e,notes:s})),T(""),null==h||h(I))}catch(e){}}}),"history"===C&&e.jsx(ye,{candidate:y,showFilters:!0,showStatistics:!0,groupByDate:!0,maxItems:50}),"privacy"===C&&e.jsx(be,{candidate:y,onUpdate:U})]})]}):null})},we=e=>({registration:{label:"Registration",color:"bg-blue-100 text-blue-800",progress:1},"resume-sharing":{label:"Resume Sharing",color:"bg-purple-100 text-purple-800",progress:2},shortlisting:{label:"Shortlisting",color:"bg-amber-100 text-amber-800",progress:3},"lineup-feedback":{label:"Lineup & Feedback",color:"bg-cyan-100 text-cyan-800",progress:4},selection:{label:"Selection",color:"bg-green-100 text-green-800",progress:5},closure:{label:"Closure",color:"bg-emerald-100 text-emerald-800",progress:6},completed:{label:"Completed",color:"bg-gray-100 text-gray-800",progress:7}}[e]||{label:"Unknown",color:"bg-gray-100 text-gray-800",progress:0}),Se=e=>({new:{label:"New",color:"bg-blue-100 text-blue-800"},"in-process":{label:"In Process",color:"bg-yellow-100 text-yellow-800"},shortlisted:{label:"Shortlisted",color:"bg-purple-100 text-purple-800"},interviewed:{label:"Interviewed",color:"bg-cyan-100 text-cyan-800"},selected:{label:"Selected",color:"bg-green-100 text-green-800"},placed:{label:"Placed",color:"bg-emerald-100 text-emerald-800"},rejected:{label:"Rejected",color:"bg-red-100 text-red-800"}}[e]||{label:"Unknown",color:"bg-gray-100 text-gray-800"}),ke=()=>{const t=Q(),[c,u]=l.useState([]),[g,h]=l.useState(!0),[p,y]=l.useState(null),[b,j]=l.useState([]),[N,v]=l.useState(!1),[w,S]=l.useState("list"),[k,D]=l.useState({name:"",phone:"",status:"all",stage:"all",allocation:"all"}),[A,B]=l.useState(null),[I,T]=l.useState(!1);l.useEffect(()=>{E()},[]);const E=async()=>{try{h(!0),y(null);const e=await a.getAll();e.success?u(Array.isArray(e.data)?e.data:[]):(y(e.message||"Failed to load candidates. Please try again."),u(R))}catch(e){y("Failed to load candidates. Please try again."),u(R)}finally{h(!1)}},R=[{id:1,cvNo:"CV001",name:"Priya Sharma",email:"priya.sharma@gmail.com",phone:"+91 98765 43210",position:"Senior React Developer",experience:"5 years",location:"Bengaluru, Karnataka",skills:["React","TypeScript","Node.js","AWS"],currentStage:"shortlisting",overallStatus:"shortlisted",allocation:"Sheet-1",createdByName:"Rahul Kumar",rating:4.5,appliedDate:"2024-01-15",interestedFor:"Senior React Developer",totalExperience:"5 years",lastSalary:"12L",salaryExpectation:"18L",currentCompany:"TechCorp Solutions",designation:"Senior Frontend Developer",qualification:"B.Tech Computer Science",industry:"Information Technology",registration:{date:new Date("2024-01-15"),resource:"Naukri",registrationStatus:"Yes"},resumeSharing:{shortlistsForClient:"Infosys",resumeShareStatus:"Done",remark:"Strong React skills"},shortlisting:{shortlistDate:new Date("2024-01-18"),shortlistsForClient:"Infosys",resource:"Internal",shortlistStatus:"Done"},lineupFeedback:{feedbacks:[{feedbackNumber:1,clientName:"Infosys",feedback:"Selected",scheduledDate:new Date("2024-01-20")}],lineupStatus:"Done"},notes:[{id:"1",content:"Excellent technical skills, good communication",createdBy:"rahul-kumar",createdByName:"Rahul Kumar",createdAt:new Date("2024-01-16"),isPrivate:!1}],documents:[{id:"1",name:"Priya_Sharma_Resume.pdf",type:"application/pdf",size:1024e3,uploadedAt:new Date("2024-01-15"),uploadedBy:"Rahul Kumar"}],changeHistory:[{id:"1",candidateId:"1",changedBy:"rahul-kumar",changedByName:"Rahul Kumar",changeType:"created",changes:[],timestamp:new Date("2024-01-15"),reason:"Initial candidate registration"}],createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-18")},{id:2,cvNo:"CV002",name:"Amit Patel",email:"amit.patel@gmail.com",phone:"+91 87654 32109",position:"Full Stack Developer",experience:"3 years",location:"Mumbai, Maharashtra",skills:["JavaScript","Python","Django","React"],currentStage:"lineup-feedback",overallStatus:"interviewed",allocation:"Sheet-2",createdByName:"Sneha Gupta",rating:4.2,appliedDate:"2024-01-18",interestedFor:"Full Stack Developer",totalExperience:"3 years",lastSalary:"8L",salaryExpectation:"12L",currentCompany:"WebTech Solutions",designation:"Software Developer",qualification:"MCA",industry:"Software Development",registration:{date:new Date("2024-01-18"),resource:"LinkedIn",registrationStatus:"Yes"},resumeSharing:{shortlistsForClient:"TCS",resumeShareStatus:"Done"},lineupFeedback:{feedbacks:[{feedbackNumber:1,clientName:"TCS",feedback:"Hold",scheduledDate:new Date("2024-01-22")}],lineupStatus:"Done"},notes:[],documents:[],changeHistory:[],createdAt:new Date("2024-01-18"),updatedAt:new Date("2024-01-22")},{id:3,cvNo:"CV003",name:"Kavya Reddy",email:"kavya.reddy@gmail.com",phone:"+91 76543 21098",position:"UI/UX Designer",experience:"4 years",location:"Hyderabad, Telangana",skills:["Figma","Adobe XD","Sketch","Prototyping"],currentStage:"selection",overallStatus:"selected",allocation:"Team Alpha",createdByName:"Vikram Singh",rating:4.8,appliedDate:"2024-01-12",interestedFor:"Senior UI/UX Designer",totalExperience:"4 years",lastSalary:"10L",salaryExpectation:"15L",currentCompany:"Design Studio",designation:"UI/UX Designer",qualification:"B.Des Visual Communication",industry:"Design & Creative",registration:{date:new Date("2024-01-12"),resource:"Behance",registrationStatus:"Yes"},selection:{client:"Adobe",selectionDate:new Date("2024-01-25"),selectionStatus:"Selected"},notes:[],documents:[],changeHistory:[],createdAt:new Date("2024-01-12"),updatedAt:new Date("2024-01-25")},{id:4,cvNo:"CV004",name:"Rohit Verma",email:"rohit.verma@gmail.com",phone:"+91 65432 10987",position:"DevOps Engineer",experience:"6 years",location:"Pune, Maharashtra",skills:["AWS","Docker","Kubernetes","Jenkins"],currentStage:"resume-sharing",overallStatus:"in-process",allocation:"Sheet-3",createdByName:"Anita Sharma",rating:4.3,appliedDate:"2024-01-20",interestedFor:"Senior DevOps Engineer",totalExperience:"6 years",lastSalary:"15L",salaryExpectation:"22L",currentCompany:"CloudTech Systems",designation:"DevOps Engineer",qualification:"B.Tech Information Technology",industry:"Cloud Computing",registration:{date:new Date("2024-01-20"),resource:"Indeed",registrationStatus:"Yes"},resumeSharing:{shortlistsForClient:"Amazon",resumeShareStatus:"Pending"},notes:[],documents:[],changeHistory:[],createdAt:new Date("2024-01-20"),updatedAt:new Date("2024-01-20")},{id:5,cvNo:"CV005",name:"Neha Agarwal",email:"neha.agarwal@gmail.com",phone:"+91 54321 09876",position:"Data Scientist",experience:"4 years",location:"Delhi, NCR",skills:["Python","Machine Learning","TensorFlow","SQL"],currentStage:"closure",overallStatus:"placed",allocation:"Team Beta",createdByName:"Rajesh Kumar",rating:4.7,appliedDate:"2024-01-10",interestedFor:"Senior Data Scientist",totalExperience:"4 years",lastSalary:"14L",salaryExpectation:"20L",currentCompany:"DataTech Analytics",designation:"Data Scientist",qualification:"M.Tech Data Science",industry:"Analytics & AI",registration:{date:new Date("2024-01-10"),resource:"Kaggle",registrationStatus:"Yes"},closure:{joiningDate:new Date("2024-02-01"),placedIn:"Microsoft",offeredSalary:"22L",charges:"2.2L",joiningStatus:"Yes"},notes:[{id:"1",content:"Exceptional ML skills, placed successfully at Microsoft",createdBy:"rajesh-kumar",createdByName:"Rajesh Kumar",createdAt:new Date("2024-01-28"),isPrivate:!1}],documents:[],changeHistory:[],createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-02-01")}],[U,L]=l.useState(""),$=async e=>{if(window.confirm("Are you sure you want to delete this candidate?"))try{h(!0),await a.delete(e),await E(),alert("Candidate deleted successfully!")}catch(s){alert("Failed to delete candidate. Please try again.")}finally{h(!1)}},_=(e,s)=>{j(a=>s?[...a,e]:a.filter(s=>s!==e))},M=e=>{B(e),T(!0)},O=c.filter(e=>{var s,a,t,l,r,n,i;if("all"!==k.status&&e.overallStatus!==k.status)return!1;if("all"!==k.stage&&e.currentStage!==k.stage)return!1;if("all"!==k.allocation&&e.allocation!==k.allocation)return!1;if(k.name&&!(null==(s=e.name)?void 0:s.toLowerCase().includes(k.name.toLowerCase())))return!1;if(k.phone&&!(null==(a=e.phone)?void 0:a.includes(k.phone)))return!1;if(U){const s=U.toLowerCase();return(null==(t=e.name)?void 0:t.toLowerCase().includes(s))||(null==(l=e.email)?void 0:l.toLowerCase().includes(s))||(null==(r=e.phone)?void 0:r.includes(s))||(null==(n=e.position)?void 0:n.toLowerCase().includes(s))||(null==(i=e.interestedFor)?void 0:i.toLowerCase().includes(s))}return!0});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Candidates"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your talent pipeline and candidate relationships"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(s,{variant:"primary",icon:e.jsx(C,{className:"w-4 h-4"}),onClick:()=>t("/app/recruiter/candidates/add"),children:"Add Candidate"})})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-80 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:U,onChange:e=>L(e.target.value),placeholder:"Search candidates...",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>v(!N),className:"flex items-center justify-between w-full text-left font-medium text-gray-900 mb-3",children:[e.jsx("span",{children:"Filters"}),e.jsx(K,{className:"w-4 h-4"})]}),N&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:k.name,onChange:e=>D(s=>({...s,name:e.target.value})),placeholder:"Filter by name...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"text",value:k.phone,onChange:e=>D(s=>({...s,phone:e.target.value})),placeholder:"Filter by phone...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:k.status,onChange:e=>D(s=>({...s,status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"new",children:"New"}),e.jsx("option",{value:"in-process",children:"In Process"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interviewed",children:"Interviewed"}),e.jsx("option",{value:"selected",children:"Selected"}),e.jsx("option",{value:"placed",children:"Placed"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stage"}),e.jsxs("select",{value:k.stage,onChange:e=>D(s=>({...s,stage:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Stages"}),e.jsx("option",{value:"registration",children:"Registration"}),e.jsx("option",{value:"resume-sharing",children:"Resume Sharing"}),e.jsx("option",{value:"shortlisting",children:"Shortlisting"}),e.jsx("option",{value:"lineup-feedback",children:"Lineup & Feedback"}),e.jsx("option",{value:"selection",children:"Selection"}),e.jsx("option",{value:"closure",children:"Closure"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allocation"}),e.jsxs("select",{value:k.allocation,onChange:e=>D(s=>({...s,allocation:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Allocations"}),e.jsx("option",{value:"Sheet-1",children:"Sheet-1"}),e.jsx("option",{value:"Sheet-2",children:"Sheet-2"}),e.jsx("option",{value:"Sheet-3",children:"Sheet-3"}),e.jsx("option",{value:"Sheet-4",children:"Sheet-4"}),e.jsx("option",{value:"Sheet-5",children:"Sheet-5"}),e.jsx("option",{value:"Sheet-6",children:"Sheet-6"}),e.jsx("option",{value:"Team Alpha",children:"Team Alpha"}),e.jsx("option",{value:"Team Beta",children:"Team Beta"})]})]}),e.jsx("button",{onClick:()=>D({name:"",phone:"",status:"all",stage:"all",allocation:"all"}),className:"w-full text-sm text-blue-600 hover:text-blue-700 transition-colors",children:"Clear Filters"})]})]})]})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-6",children:[e.jsx(n,{selectedItems:b,onBulkEdit:async(e,s)=>{try{h(!0);const t=e.map(e=>a.update(e,s));await Promise.all(t),await E(),j([]),alert(`Successfully updated ${e.length} candidates!`)}catch(t){alert("Bulk edit failed: "+t.message)}finally{h(!1)}},onBulkDelete:async e=>{try{h(!0);const s=e.map(e=>a.delete(e));await Promise.all(s),await E(),j([]),alert(`Successfully deleted ${e.length} candidates!`)}catch(s){alert("Bulk delete failed: "+s.message)}finally{h(!1)}},onBulkExport:async e=>{try{const s=await i.exportCandidates(c,e);s.success||alert("Export failed: "+s.message)}catch(s){alert("Export failed: "+s.message)}},onImport:async(e,s,a)=>{try{const t=await i.importCandidates(e,s,a);return await E(),t.successful>0&&alert(`Successfully imported ${t.successful} candidates!`),t.failed>0&&alert(`${t.failed} candidates failed to import. Check console for details.`),t}catch(t){throw t}},totalSelected:b.length,data:c,onClearSelection:()=>j([])}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[O.length>0&&e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:b.length===O.length&&O.length>0,onChange:e=>{return s=e.target.checked,void j(s?c.map(e=>e.id):[]);var s},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Select All"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[b.length," of ",O.length," selected"]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",O.length," of ",c.length," candidates"]}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>S("list"),className:"flex items-center space-x-1 px-3 py-1 rounded-md text-sm transition-colors "+("list"===w?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:"List"})]}),e.jsxs("button",{onClick:()=>S("grid"),className:"flex items-center space-x-1 px-3 py-1 rounded-md text-sm transition-colors "+("grid"===w?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Grid"})]})]})]})]}),0===O.length?e.jsx(r,{icon:e.jsx(P,{className:"w-16 h-16"}),title:"No candidates found",description:"No candidates match your current filters. Try adjusting your search criteria or add new candidates to your database.",action:e.jsx(s,{variant:"primary",icon:e.jsx(C,{className:"w-4 h-4"}),onClick:()=>t("/app/recruiter/candidates/add"),children:"Add New Candidate"})}):"list"===w?e.jsx("div",{className:"space-y-4",children:O.map(s=>{const a=we(s.currentStage),t=Se(s.overallStatus);return e.jsx("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:b.includes(s.id),onChange:e=>_(s.id,e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg flex-shrink-0",children:e.jsx("span",{className:"text-xl font-bold text-white",children:s.name.split(" ").map(e=>e[0]).join("").toUpperCase()})})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.name}),s.rating&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(z,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.rating})]})]}),e.jsx("p",{className:"text-gray-600 font-medium mb-1",children:s.interestedFor||s.position}),e.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${t.color}`,children:t.label}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${a.color}`,children:a.label}),s.allocation&&e.jsx("span",{className:"inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full",children:s.allocation})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.email})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:s.location})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{className:"w-4 h-4"}),e.jsxs("span",{className:"truncate",children:["Added by ",s.createdByName]})]})]}),s.skills&&s.skills.length>0&&e.jsxs("div",{className:"mt-3 flex flex-wrap gap-1",children:[s.skills.slice(0,4).map((s,a)=>e.jsx("span",{className:"inline-block bg-blue-50 text-blue-700 text-xs px-2 py-1 rounded",children:s},a)),s.skills.length>4&&e.jsxs("span",{className:"inline-block bg-gray-50 text-gray-600 text-xs px-2 py-1 rounded",children:["+",s.skills.length-4," more"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>M(s.id),title:"View Profile",className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx("button",{title:"Schedule Interview",className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(f,{className:"w-4 h-4"})}),e.jsx("button",{title:"Send Email",className:"p-2 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:e.jsx(o,{className:"w-4 h-4"})}),e.jsx("button",{title:"Delete Candidate",onClick:()=>$(s.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(V,{className:"w-4 h-4"})})]})]})})]})},s.id)})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(s=>{const a=we(s.currentStage),t=Se(s.overallStatus);return e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("input",{type:"checkbox",checked:b.includes(s.id),onChange:e=>_(s.id,e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.rating&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(z,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.rating})]})]}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg mx-auto mb-3",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:s.name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:s.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:s.interestedFor||s.position}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-3",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${t.color}`,children:t.label}),e.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${a.color}`,children:a.label})]}),s.allocation&&e.jsx("span",{className:"inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full mb-3",children:s.allocation})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.email})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.location})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Added by ",s.createdByName]})]})]}),s.skills&&s.skills.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.skills.slice(0,3).map((s,a)=>e.jsx("span",{className:"inline-block bg-blue-50 text-blue-700 text-xs px-2 py-1 rounded",children:s},a)),s.skills.length>3&&e.jsxs("span",{className:"inline-block bg-gray-50 text-gray-600 text-xs px-2 py-1 rounded",children:["+",s.skills.length-3]})]})}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>M(s.id),title:"View Profile",className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx("button",{title:"Schedule Interview",className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(f,{className:"w-4 h-4"})}),e.jsx("button",{title:"Send Email",className:"p-2 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",children:e.jsx(o,{className:"w-4 h-4"})}),e.jsx("button",{title:"Delete Candidate",onClick:()=>$(s.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(V,{className:"w-4 h-4"})})]})]},s.id)})})]})]})]}),e.jsx(ve,{isOpen:I,onClose:()=>{T(!1),B(null)},candidateId:A,onStatusUpdate:async e=>{await E()},onAddNote:e=>{},currentUser:{id:"current-user",name:"Current User"}})]})};export{ke as default};
